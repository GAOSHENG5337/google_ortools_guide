<!DOCTYPE html>
<!-- saved from url=(0066)https://developers.google.cn/optimization/routing/cvrptw_resources -->
<html lang="en" class="" ml-update="aware"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" async="" src="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/linkid.js"></script><script async="" src="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/analytics.js"></script><script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script><meta name="xsrf_token" content="FF8W8BTdPAjb3QXn41nN_zovgiKptofpDyN_lMMO0cw6MTU0NzAxNDA1MTU2MDE3Mw"><link rel="canonical" href="https://developers.google.com/optimization/routing/cvrptw_resources"><link rel="alternate" href="https://developers.google.com/optimization/routing/cvrptw_resources" hreflang="en"><link rel="alternate" href="https://developers.google.cn/optimization/routing/cvrptw_resources" hreflang="en-cn"><link rel="alternate" href="https://developers.google.com/optimization/routing/cvrptw_resources" hreflang="x-default"><link rel="shortcut icon" href="https://developers.google.cn/_static/0ee1984e83/images/favicon.png"><link rel="apple-touch-icon" href="https://developers.google.cn/_static/0ee1984e83/images/touch-icon.png"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/css"><link rel="stylesheet" href="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/devsite-google-blue.css"><script src="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/jquery-bundle.js"></script><meta property="og:site_name" content="Google Developers"><meta property="og:type" content="website"><meta property="og:url" content="https://developers.google.com/optimization/routing/cvrptw_resources"><meta property="og:locale" content="en"><script>
    var ___gcfg = ___gcfg || {};
    ___gcfg.lang = 'zh-cn';
  </script><title>Vehicle Routing with Resource Constraints &nbsp;|&nbsp; OR-Tools
      &nbsp;|&nbsp; Google Developers</title><meta property="og:title" content="Vehicle Routing with Resource Constraints  |  OR-Tools
       |  Google Developers"></head><body class="devsite-doc-page devsite-header-no-upper-tabs no-touch" data-family="endorsed" id="top_of_page"><div class="devsite-wrapper" style="margin-top: 0px;"><div class="devsite-top-section-wrapper
            "><header class="devsite-top-section nocontent devsite-top-section-pinned"><div class="devsite-top-logo-row-wrapper-wrapper" style="position: relative;"><div class="devsite-top-logo-row-wrapper"><div class="devsite-top-logo-row devsite-full-site-width"><button type="button" class="devsite-expand-section-nav devsite-header-icon-button
                                       button-flat material-icons gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Hamburger menu"></button><div class="devsite-product-name-wrapper"><a class="devsite-product-name-link gc-analytics-event" href="https://developers.google.cn/optimization/" data-category="Site-Wide Custom Events" data-label="Project logo (header)"><img src="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/orLogo.png" class="devsite-product-logo" alt="Google OR-Tools"></a><span class="devsite-product-name"><ul class="devsite-breadcrumb-list"><li class="devsite-breadcrumb-item"><a href="https://developers.google.cn/optimization/" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Upper Header" data-value="1">
    
    
      
        Google OR-Tools
      
    
    
    </a></li></ul></span></div><div class="devsite-header-upper-tabs"></div><form class="devsite-search-form" action="https://developers.google.cn/s/results/" method="GET" id="top-search" search-placeholder="搜索"><div id="searchbox" class="devsite-searchbox"><input placeholder="搜索" type="text" class="devsite-search-field devsite-search-query" name="q" value="" autocomplete="off" aria-label="搜索框"><div class="devsite-search-image material-icons"></div></div><input type="hidden" name="p" id="search_project" value="/optimization/" data-project-name="OR-Tools" data-project-path="/optimization/" data-query-match=""><input type="hidden" class="suggest-project" value="OR-Tools"><div class="suggest-project-metadata" data-home_url="/optimization/" data-path="/optimization/" data-name="OR-Tools"></div><div class="devsite-popout devsite-popout-closed"><div class="devsite-suggest-results" style="display: none;"></div></div></form><a class="devsite-header-link devsite-top-button button gc-analytics-event" href="https://developers.google.cn/products/" data-category="Site-Wide Custom Events" data-label="Site header link" track-type="globalNav" track-name="所有产品" track-metadata-position="nav" track-metadata-eventdetail="nav"><div class="devsite-header-link-icon material-icons">
                  list
                </div><div class="devsite-header-link-label">所有产品</div></a><button type="button" class="devsite-search-button devsite-header-icon-button button-flat
                                       material-icons"></button></div></div></div><div class="devsite-collapsible-section" style="margin-top: 0px;"><div class="devsite-header-background devsite-full-site-width"><div class="devsite-doc-set-nav-row devsite-full-site-width"><nav class="devsite-doc-set-nav devsite-nav devsite-overflow-tabs-scroll-wrapper"><ul class="devsite-doc-set-nav-tab-list devsite-overflow-tabs-scroll" style="min-width: 550px; left: 0px;"><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.cn/optimization/" class=" devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Tab: 首页">
          首页
        </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.cn/optimization/install" class=" devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Tab: Installation">
          Installation
        </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.cn/optimization/introduction/overview" class="devsite-doc-set-nav-active devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event" aria-label="Guides, selected" data-category="Site-Wide Custom Events" data-label="Tab: Guides">
          Guides
        </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.cn/optimization/reference" class=" devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Tab: Reference">
          Reference
        </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.cn/optimization/support/overview" class=" devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Tab: Support">
          Support
        </a></li></ul><button type="button" class="devsite-overflow-tabs-scroll-button devsite-top-button material-icons devsite-scroll-forward devsite-hidden" aria-label="滚动标签"></button><button type="button" class="devsite-overflow-tabs-scroll-button devsite-top-button material-icons devsite-scroll-back devsite-hidden" aria-label="滚动标签"></button></nav></div></div></div></header><script>
    if (window.jQuery) {
      $(document).ready(function() {
        if (window.devsite && window.devsite.search) {
          
          window.devsite.search.init('zh-cn')
        }
      });
    }
  </script></div><div id="gc-wrapper" itemscope="" itemtype="http://schema.org/Article"><input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {}, &quot;gaid&quot;: &quot;UA-10115507-7&quot;}"><input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension4&quot;: &quot;OR-Tools&quot;, &quot;dimension5&quot;: &quot;zh-cn&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-24532603-11&quot;}"><script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "CN", "language": {"requested": "zh-cn", "served": "en"}, "projectName": "OR-Tools", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>

      
        <div class="devsite-site-mask"></div>
        
  


<nav class="devsite-nav-responsive devsite-nav nocontent" tabindex="0" style="left: -256px;">
  
  <div class="devsite-nav-responsive-tabs-panel devsite-nav-responsive-transition devsite-nav-responsive-transform" style="display: none;">
    
      



<nav class="devsite-nav-responsive-tabs devsite-nav">
  <ul class="devsite-nav-list">
  

  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <a href="https://developers.google.cn/optimization/" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                  " data-category="Site-Wide Custom Events" data-label="Responsive Tab: 首页"><span>
          首页
        </span></a>
      

      

      

      
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <a href="https://developers.google.cn/optimization/install?nav=true" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                  " data-category="Site-Wide Custom Events" data-label="Responsive Tab: Installation"><span>
          Installation
        </span></a>
      

      

      

      
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <span class="devsite-nav-responsive-forward devsite-nav-responsive-tab devsite-nav-title
                     devsite-nav-active gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Responsive Tab: Guides" tabindex="0"><span>
          Guides
        </span></span>
      

      

      

      
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <a href="https://developers.google.cn/optimization/reference" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                  " data-category="Site-Wide Custom Events" data-label="Responsive Tab: Reference"><span>
          Reference
        </span></a>
      

      

      

      
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <a href="https://developers.google.cn/optimization/support/overview?nav=true" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                  " data-category="Site-Wide Custom Events" data-label="Responsive Tab: Support"><span>
          Support
        </span></a>
      

      

      

      
    </li>
  

  
    <li class="devsite-nav-item devsite-nav-item-heading">
      <a href="https://developers.google.cn/products/" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Responsive Tab: all_products"><span>
        所有产品
      </span></a>
    </li>
  
  </ul>
</nav>


    
  </div>
  
  
  <div class="devsite-nav-responsive-sidebar-panel" style="display: block;">
    
    <div class="devsite-nav-responsive-back" tabindex="0"></div>
    
    <nav class="devsite-nav-responsive-sidebar">
      
      
    <ul class="devsite-nav-list devsite-nav-expandable devsite-nav-only-accordions"><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Introduction, click to expand/collapse" role="link" tabindex="0"><span>Introduction</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/overview" class="devsite-nav-title"><span>About Combinatorial Optimization</span></a></li><li class="devsite-nav-item devsite-nav-item-section-expandable"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Get Started with OR-Tools, click to expand/collapse" role="link" tabindex="0"><span>Get Started with OR-Tools</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="1" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/get_started" class="devsite-nav-title"><span>概览</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/cpp" class="devsite-nav-title"><span>C++</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/python" class="devsite-nav-title"><span>Python</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/java" class="devsite-nav-title"><span>Java</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/cs" class="devsite-nav-title"><span>C#</span></a></li></ul></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Linear Optimization, click to expand/collapse" role="link" tabindex="0"><span>Linear Optimization</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/lp" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/lp/glop" class="devsite-nav-title"><span>The Glop Linear Solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/lp/add-on" class="devsite-nav-title"><span>Add-on for Google Sheets</span></a></li><li class="devsite-nav-item devsite-nav-external devsite-nav-has-status"><a href="https://developers.google.cn/apps-script/reference/optimization" class="devsite-nav-title"><span class="devsite-nav-text"><span>Service for Apps Script</span></span><span class="devsite-nav-icon-wrapper"><span class="devsite-nav-icon material-icons" data-tooltip-align="b,c" data-tooltip="外部" aria-label="外部" data-title="外部"></span></span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Constraint Optimization, click to expand/collapse" role="link" tabindex="0"><span>Constraint Optimization</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/cp_solver" class="devsite-nav-title"><span>CP-SAT Solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/original_cp_solver" class="devsite-nav-title"><span>Original CP Solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/cryptarithmetic" class="devsite-nav-title"><span>Cryptarithmetic</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens" class="devsite-nav-title"><span>The N-queens Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/cp_tasks" class="devsite-nav-title"><span>Setting Solver Limits</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Integer Optimization, click to expand/collapse" role="link" tabindex="0"><span>Integer Optimization</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip/integer_opt" class="devsite-nav-title"><span>Mixed-Integer Programming</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip/integer_opt_cp" class="devsite-nav-title"><span>CP Approach to Integer Optimization</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip/sudoku" class="devsite-nav-title"><span>Sudoku Add-on for Google Sheets</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Routing, click to expand/collapse" role="link" tabindex="0"><span>Routing</span></span><a class="devsite-nav-toggle devsite-nav-toggle-expanded material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0"></a><ul class="devsite-nav-section devsite-nav-section-expanded"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/tsp" class="devsite-nav-title"><span>Traveling Salesman Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/vrp" class="devsite-nav-title"><span>Vehicle Routing Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrp" class="devsite-nav-title"><span>Capacity Constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw" class="devsite-nav-title"><span>Time Window Constraints</span></a></li><li class="devsite-nav-item devsite-nav-active"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources" class="devsite-nav-title"><span>Resource Constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/penalties" class="devsite-nav-title" data-tooltip-align="b,c" data-tooltip="Dropping Visits in Infeasible Problems-Penalties" aria-label="Dropping Visits in Infeasible Problems-Penalties" data-title="Dropping Visits in Infeasible Problems-Penalties"><span>Dropping Visits in Infeasible Problems-Penalties</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/routing_tasks" class="devsite-nav-title"><span>Common Vehicle Routing Tasks</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/routing_options" class="devsite-nav-title"><span>Routing Options</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/google_direction" class="devsite-nav-title"><span>Google Direction API</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Bin Packing, click to expand/collapse" role="link" tabindex="0"><span>Bin Packing</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/bin" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/bin/knapsack" class="devsite-nav-title"><span>Knapsacks</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Network Flows, click to expand/collapse" role="link" tabindex="0"><span>Network Flows</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/flow" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/flow/maxflow" class="devsite-nav-title"><span>Maximum Flows</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/flow/mincostflow" class="devsite-nav-title"><span>Minimum Cost Flows</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Assignment, click to expand/collapse" role="link" tabindex="0"><span>Assignment</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/simple_assignment" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_min_cost_flow" class="devsite-nav-title"><span>Assignment as a Min Cost Flow Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_mip" class="devsite-nav-title"><span>Assignment as a MIP Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_cp" class="devsite-nav-title"><span>Assignment with Task Sizes</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_groups" class="devsite-nav-title"><span>Assignment with Allowed Groups</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Scheduling, click to expand/collapse" role="link" tabindex="0"><span>Scheduling</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/scheduling" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/scheduling/employee_scheduling" class="devsite-nav-title"><span>Employee Scheduling</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/scheduling/job_shop" class="devsite-nav-title"><span>The Job Shop Problem</span></a></li></ul></li></ul></nav>
  </div>
  
  
</nav>


        <div class="devsite-main-content clearfix" style="margin-top: 136px;">

        
        

        
  
  
    
    
      
  <nav class="devsite-section-nav devsite-nav nocontent" style="left: auto; max-height: 544px; position: relative; top: 0px;">
    <ul class="devsite-nav-list devsite-nav-expandable devsite-nav-only-accordions"><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Introduction, click to expand/collapse" role="link" tabindex="0"><span>Introduction</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/overview" class="devsite-nav-title"><span>About Combinatorial Optimization</span></a></li><li class="devsite-nav-item devsite-nav-item-section-expandable"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Get Started with OR-Tools, click to expand/collapse" role="link" tabindex="0"><span>Get Started with OR-Tools</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="1" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/get_started" class="devsite-nav-title"><span>概览</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/cpp" class="devsite-nav-title"><span>C++</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/python" class="devsite-nav-title"><span>Python</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/java" class="devsite-nav-title"><span>Java</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/cs" class="devsite-nav-title"><span>C#</span></a></li></ul></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Linear Optimization, click to expand/collapse" role="link" tabindex="0"><span>Linear Optimization</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/lp" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/lp/glop" class="devsite-nav-title"><span>The Glop Linear Solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/lp/add-on" class="devsite-nav-title"><span>Add-on for Google Sheets</span></a></li><li class="devsite-nav-item devsite-nav-external devsite-nav-has-status"><a href="https://developers.google.cn/apps-script/reference/optimization" class="devsite-nav-title"><span class="devsite-nav-text"><span>Service for Apps Script</span></span><span class="devsite-nav-icon-wrapper"><span class="devsite-nav-icon material-icons" data-tooltip-align="b,c" data-tooltip="外部" aria-label="外部" data-title="外部"></span></span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Constraint Optimization, click to expand/collapse" role="link" tabindex="0"><span>Constraint Optimization</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/cp_solver" class="devsite-nav-title"><span>CP-SAT Solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/original_cp_solver" class="devsite-nav-title"><span>Original CP Solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/cryptarithmetic" class="devsite-nav-title"><span>Cryptarithmetic</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens" class="devsite-nav-title"><span>The N-queens Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/cp_tasks" class="devsite-nav-title"><span>Setting Solver Limits</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Integer Optimization, click to expand/collapse" role="link" tabindex="0"><span>Integer Optimization</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip/integer_opt" class="devsite-nav-title"><span>Mixed-Integer Programming</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip/integer_opt_cp" class="devsite-nav-title"><span>CP Approach to Integer Optimization</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip/sudoku" class="devsite-nav-title"><span>Sudoku Add-on for Google Sheets</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Routing, click to expand/collapse" role="link" tabindex="0"><span>Routing</span></span><a class="devsite-nav-toggle devsite-nav-toggle-expanded material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0"></a><ul class="devsite-nav-section devsite-nav-section-expanded"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/tsp" class="devsite-nav-title"><span>Traveling Salesman Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/vrp" class="devsite-nav-title"><span>Vehicle Routing Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrp" class="devsite-nav-title"><span>Capacity Constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw" class="devsite-nav-title"><span>Time Window Constraints</span></a></li><li class="devsite-nav-item devsite-nav-active"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources" class="devsite-nav-title"><span>Resource Constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/penalties" class="devsite-nav-title"><span>Dropping Visits in Infeasible Problems-Penalties</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/routing_tasks" class="devsite-nav-title"><span>Common Vehicle Routing Tasks</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/routing_options" class="devsite-nav-title"><span>Routing Options</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/google_direction" class="devsite-nav-title"><span>Google Direction API</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Bin Packing, click to expand/collapse" role="link" tabindex="0"><span>Bin Packing</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/bin" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/bin/knapsack" class="devsite-nav-title"><span>Knapsacks</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Network Flows, click to expand/collapse" role="link" tabindex="0"><span>Network Flows</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/flow" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/flow/maxflow" class="devsite-nav-title"><span>Maximum Flows</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/flow/mincostflow" class="devsite-nav-title"><span>Minimum Cost Flows</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Assignment, click to expand/collapse" role="link" tabindex="0"><span>Assignment</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/simple_assignment" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_min_cost_flow" class="devsite-nav-title"><span>Assignment as a Min Cost Flow Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_mip" class="devsite-nav-title"><span>Assignment as a MIP Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_cp" class="devsite-nav-title"><span>Assignment with Task Sizes</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_groups" class="devsite-nav-title"><span>Assignment with Allowed Groups</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Scheduling, click to expand/collapse" role="link" tabindex="0"><span>Scheduling</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/scheduling" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/scheduling/employee_scheduling" class="devsite-nav-title"><span>Employee Scheduling</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/scheduling/job_shop" class="devsite-nav-title"><span>The Job Shop Problem</span></a></li></ul></li></ul>
  </nav>

    

    
  <nav class="devsite-page-nav devsite-nav" style="position: relative; left: auto; max-height: 544px; top: 0px;"><ul class="devsite-page-nav-list"><li class="devsite-nav-item devsite-nav-item-heading"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#top_of_page" class="devsite-nav-title"><span>目录</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#depot" class="devsite-nav-title"><span>Waiting at the depot</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#cumulative" class="devsite-nav-title"><span>A change to the time dimension</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#loading_windows" class="devsite-nav-title"><span>Add time windows for loading</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#loading_constraints" class="devsite-nav-title"><span>Add constraints to the time windows</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#output" class="devsite-nav-title"><span>Output of the program</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#program" class="devsite-nav-title"><span>The entire program</span></a></li></ul></nav>


      <article class="devsite-article">
        <article class="devsite-article-inner">
  
          
  


<div class="devsite-rating-container
            "><div class="devsite-rating-stars"><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons" data-rating-val="1" data-category="Site-Wide Custom Events" data-label="Star Rating 1" track-metadata-score="1" track-type="feedback" track-name="rating" track-metadata-position="header" role="button" aria-label="网站内容评分：1 星（最高 5 星）"></div><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons" data-rating-val="2" data-category="Site-Wide Custom Events" data-label="Star Rating 2" track-metadata-score="2" track-type="feedback" track-name="rating" track-metadata-position="header" role="button" aria-label="网站内容评分：2 星（最高 5 星）"></div><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons" data-rating-val="3" data-category="Site-Wide Custom Events" data-label="Star Rating 3" track-metadata-score="3" track-type="feedback" track-name="rating" track-metadata-position="header" role="button" aria-label="网站内容评分：3 星（最高 5 星）"></div><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons" data-rating-val="4" data-category="Site-Wide Custom Events" data-label="Star Rating 4" track-metadata-score="4" track-type="feedback" track-name="rating" track-metadata-position="header" role="button" aria-label="网站内容评分：4 星（最高 5 星）"></div><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons" data-rating-val="5" data-category="Site-Wide Custom Events" data-label="Star Rating 5" track-metadata-score="5" track-type="feedback" track-name="rating" track-metadata-position="header" role="button" aria-label="网站内容评分：5 星（最高 5 星）"></div></div><div class="devsite-rating-description"></div><div class="devsite-rating-internal"><span class="devsite-rating-stats"></span></div></div><script>
  $(document).ready(function() {
    devsite.ratings.init(
      document.querySelectorAll('#devsite-feedback-project'), false
      
    );
  });
</script>


  
  <nav class="devsite-breadcrumb-nav devsite-nav">
    


<ul class="devsite-breadcrumb-list">
  
  <li class="devsite-breadcrumb-item">
    
    
    <a href="https://developers.google.cn/products/" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="1">
    
    
      产品
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="https://developers.google.cn/optimization/" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="2">
    
    
      OR-Tools
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="https://developers.google.cn/optimization/introduction/overview" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="3">
    
    
      Guides
    
    
    </a>
    
  </li>
  
</ul>

  </nav>
  
  
  <h1 itemprop="name" class="devsite-page-title">
    Vehicle Routing with Resource Constraints
  </h1>
  
  
  <nav class="devsite-page-nav-embedded devsite-nav"><ul class="devsite-page-nav-list"><li class="devsite-nav-item devsite-nav-item-heading"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#top_of_page" class="devsite-nav-title"><span>目录</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#depot" class="devsite-nav-title"><span>Waiting at the depot</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#cumulative" class="devsite-nav-title"><span>A change to the time dimension</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#loading_windows" class="devsite-nav-title"><span>Add time windows for loading</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#loading_constraints" class="devsite-nav-title"><span>Add constraints to the time windows</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#output" class="devsite-nav-title"><span>Output of the program</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources#program" class="devsite-nav-title"><span>The entire program</span></a></li></ul></nav>
  
  <div class="devsite-article-body clearfix
            " itemprop="articleBody">
    
    <p>In the vehicle routing problems you have seen so far, the constraints have been
      driven by customers' demands, such as the items they order and the times when they can
      take deliveries.
      The next example introduces constraints that are based on the delivery company's
      <span style="font-style:italic">resources</span>, including
      vehicles and drivers, the space and personnel to load and unload vehicles at the depot,
      fuel supplies, and so on. These are called
      <span style="font-style:italic">resource constraints</span>.</p>

    <h3 id="depot">Waiting at the depot</h3>
    <p>If you have ever waited on an airplane for an arrival gate to be free, you know that loading
      and unloading planes on time is a challenging problem for the airline industry.
      Vehicle routing planners have to deal with similar bottlenecks whenever
      there is an upper limit on the number of vehicles that
      can be simultaneously loaded or unloaded. The following sections present an
      example of how OR-Tools solves problems like these. </p>
      <p>To simplify the problem, we assume that each vehicle needs to spend a
      fixed amount of time at the depot for loading at the start of its route, and the
      same amount of time for unloading at the end.
      The problem is to assign each vehicle a time window for loading and a time window for unloading,
      so that at any time the number of
      overlapping time windows does not exceed the limit on vehicles.</p>
      <p> The next example
      illustrates this type of constraint. The example is similar to the
      previous <a href="https://developers.google.cn/optimization/routing/cvrptw.html#program">
      CVRPTW</a> example, but adds resource constraints.
      The following sections describe the changes that have been made for the current example.</p>

     <h3 id="cumulative">A change to the time dimension</h3>
    <p>The following shows a minor but important change to the time dimension variable.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="pln">&nbsp; &nbsp; total_times </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CreateTotalTimeCallback</span><span class="pun">(</span><span class="pln">service_time_callback</span><span class="pun">,</span><span class="pln"> dist_callback</span><span class="pun">,</span><span class="pln"> speed</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; total_time_callback </span><span class="pun">=</span><span class="pln"> total_times</span><span class="pun">.</span><span class="typ">TotalTime</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com"># Note: In this case fix_start_cumul_to_zero is set to False,</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># because some vehicles start their routes after time 0, due to resource constraints.</span><span class="pln"><br><br>&nbsp; &nbsp; fix_start_cumul_to_zero </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">False</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># Add a dimension for time and a limit on the total time_horizon</span><span class="pln"><br>&nbsp; &nbsp; routing</span><span class="pun">.</span><span class="typ">AddDimension</span><span class="pun">(</span><span class="pln">total_time_callback</span><span class="pun">,</span><span class="pln"> &nbsp;</span><span class="com"># total time function callback</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;horizon</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;horizon</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fix_start_cumul_to_zero</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;time</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; &nbsp; time_dimension </span><span class="pun">=</span><span class="pln"> routing</span><span class="pun">.</span><span class="typ">GetDimensionOrDie</span><span class="pun">(</span><span class="str">"Time"</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> order </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> num_locations</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; start </span><span class="pun">=</span><span class="pln"> start_times</span><span class="pun">[</span><span class="pln">order</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; time_dimension</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">NodeToIndex</span><span class="pun">(</span><span class="pln">order</span><span class="pun">)).</span><span class="typ">SetRange</span><span class="pun">(</span><span class="pln">start</span><span class="pun">,</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> tw_duration</span><span class="pun">)</span></pre>
    <p>In the example in the previous section, the parameter
      <code>fix_start_cumul_to_zero</code> was set to <code>True</code>
      because all vehicles started their routes at the same time. In this example, we
      set this parameter to <code>False</code>, because some vehicles start after time 0, due to
      the resource constraints.</p>

     <h3 id="loading_windows">Add time windows for loading</h3>
    <p>The following code adds time
      windows for loading and unloading each vehicle.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="pln">&nbsp; &nbsp; </span><span class="com"># Add resource constraints at the depot (start and end location of routes).</span><span class="pln"><br><br>&nbsp; &nbsp; vehicle_load_time </span><span class="pun">=</span><span class="pln"> </span><span class="lit">180</span><span class="pln"><br>&nbsp; &nbsp; vehicle_unload_time </span><span class="pun">=</span><span class="pln"> </span><span class="lit">180</span><span class="pln"><br>&nbsp; &nbsp; solver </span><span class="pun">=</span><span class="pln"> routing</span><span class="pun">.</span><span class="pln">solver</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; intervals </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">num_vehicles</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="com"># Add time windows at start of routes</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; intervals</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">solver</span><span class="pun">.</span><span class="typ">FixedDurationIntervalVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">Start</span><span class="pun">(</span><span class="pln">i</span><span class="pun">),</span><span class="pln"> time</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vehicle_load_time</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="str">"depot_interval"</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="com"># Add time windows at end of routes.</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; intervals</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">solver</span><span class="pun">.</span><span class="typ">FixedDurationIntervalVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">End</span><span class="pun">(</span><span class="pln">i</span><span class="pun">),</span><span class="pln"> time</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vehicle_unload_time</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="str">"depot_interval"</span><span class="pun">))</span></pre>
    <p> The width of the loading time windows is
      <code>vehicle_load_time</code>, the time it takes to load each vehicle at the start of the
      route. Similarly, the width of the unloading time windows is <code>vehicle_unload_time</code>.
      In this example, we assume that the loading and
      unloading times are the same. However, you can set different values for
      <code>vehicle_load_time</code>
      and <code>vehicle_unload_time</code>.

    </p><h3 id="loading_constraints">Add constraints to the time windows</h3>
    <p>The following code adds constraints to the loading time windows.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="pln">&nbsp; &nbsp; </span><span class="com"># Constrain the number of maximum simultaneous intervals at depot.</span><span class="pln"><br>&nbsp; &nbsp; depot_capacity </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; depot_usage </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">num_vehicles </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)]</span><span class="pln"><br>&nbsp; &nbsp; solver</span><span class="pun">.</span><span class="typ">AddConstraint</span><span class="pun">(</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; solver</span><span class="pun">.</span><span class="typ">Cumulative</span><span class="pun">(</span><span class="pln">intervals</span><span class="pun">,</span><span class="pln"> depot_usage</span><span class="pun">,</span><span class="pln"> depot_capacity</span><span class="pun">,</span><span class="pln"> </span><span class="str">"depot"</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># Instantiate route start and end times to produce feasible times.</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">num_vehicles</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; routing</span><span class="pun">.</span><span class="typ">AddVariableMinimizedByFinalizer</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">End</span><span class="pun">(</span><span class="pln">i</span><span class="pun">),</span><span class="pln"> time</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; routing</span><span class="pun">.</span><span class="typ">AddVariableMinimizedByFinalizer</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">Start</span><span class="pun">(</span><span class="pln">i</span><span class="pun">),</span><span class="pln"> time</span><span class="pun">))</span></pre>
    <p><code>depot_capacity</code> is the maximum loading capacity at the depot: 2 in this example.</p>
    <p><code>depot_usage</code> is a vector containing the relative amounts of space required by
     each vehicle
     during loading (or unloading). In this example, we assume that all vehicles require
     the same amount of space, so <code>depot_usage</code> contains all ones. This means that the
      maximum number of vehicles that can be loaded at the same time is 2.</p>

    <h3 id="output">Output of the program</h3>
    <p>The following shows the output of the program.</p>
    <pre><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div></div>Total distance of all routes: 1286

Route 0: 0 Load(0) Time(0, 0) -&gt;  6 Load(0) Time(8908, 11442) -&gt;  23 Load(12) Time(12511, 15045) -&gt;
18 Load(20) Time(14915, 17449) -&gt;  9 Load(21) Time(15216, 17750) -&gt;
4 Load(37) Time(22553, 22553) -&gt;  2 Load(56) Time(28256, 28256) -&gt;
13 Load(77) Time(34561, 34561) -&gt;  0 Load(93) Time(39366, 39366)


Route 1: 0 Load(0) Time(0, 0) -&gt;  27 Load(0) Time(31063, 49063) -&gt;
14 Load(20) Time(39950, 56558) -&gt;  24 Load(23) Time(57458, 57458) -&gt;  0 Load(47) Time(64661, 64661)


Route 2: 0 Load(0) Time(180, 180) -&gt;  26 Load(0) Time(11039, 24786) -&gt;
31 Load(2) Time(11645, 25392) -&gt;  21 Load(11) Time(31869, 41260) -&gt;
28 Load(23) Time(38781, 44867) -&gt;  3 Load(38) Time(49370, 49370) -&gt;
19 Load(44) Time(51174, 51174) -&gt;  17 Load(68) Time(58374, 58374) -&gt;  0 Load(87) Time(64082, 64082)


Route 3: 0 Load(0) Time(180, 180) -&gt;  20 Load(0) Time(44552, 44552) -&gt;
15 Load(8) Time(46959, 46959) -&gt;  22 Load(30) Time(53561, 53561) -&gt;
11 Load(34) Time(54764, 54764) -&gt;  8 Load(48) Time(58966, 58966) -&gt;
29 Load(54) Time(60771, 60771) -&gt;  10 Load(56) Time(61373, 61373) -&gt;
25 Load(64) Time(63775, 63775) -&gt;  5 Load(88) Time(70977, 70977) -&gt;  0 Load(95) Time(73083, 73083)


Route 4: 0 Load(0) Time(360, 360) -&gt;  30 Load(0) Time(32833, 34988) -&gt;
16 Load(14) Time(37034, 39189) -&gt;  12 Load(32) Time(42435, 44590) -&gt;
1 Load(53) Time(50891, 50891) -&gt;  7 Load(72) Time(56592, 56592) -&gt;  0 Load(88) Time(61395, 61395)
</pre>
    <p>Note that the first two vehicles depart the depot at time 0.
      The third and fourth vehicles, which must wait for
      the first two to be loaded, depart at time 180, the value of <code>vehicle_load_time</code>.
      Finally, the
      fifth vehicle, which must wait for the other four to be loaded, departs at time 360.</p>

    <h3 id="program">The entire program</h3>
    <p>The entire program for the capacitated vehicle routing problem
      with resource constraints is shown below.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="kwd">import</span><span class="pln"> math<br></span><span class="kwd">from</span><span class="pln"> ortools</span><span class="pun">.</span><span class="pln">constraint_solver </span><span class="kwd">import</span><span class="pln"> pywrapcp<br></span><span class="kwd">from</span><span class="pln"> ortools</span><span class="pun">.</span><span class="pln">constraint_solver </span><span class="kwd">import</span><span class="pln"> routing_enums_pb2<br><br></span><span class="kwd">def</span><span class="pln"> distance</span><span class="pun">(</span><span class="pln">x1</span><span class="pun">,</span><span class="pln"> y1</span><span class="pun">,</span><span class="pln"> x2</span><span class="pun">,</span><span class="pln"> y2</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># Manhattan distance</span><span class="pln"><br>&nbsp; &nbsp; dist </span><span class="pun">=</span><span class="pln"> abs</span><span class="pun">(</span><span class="pln">x1 </span><span class="pun">-</span><span class="pln"> x2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> abs</span><span class="pun">(</span><span class="pln">y1 </span><span class="pun">-</span><span class="pln"> y2</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> dist<br><br></span><span class="com"># Distance callback</span><span class="pln"><br><br></span><span class="kwd">class</span><span class="pln"> </span><span class="typ">CreateDistanceCallback</span><span class="pun">(</span><span class="kwd">object</span><span class="pun">):</span><span class="pln"><br>&nbsp; </span><span class="str">"""Create callback to calculate distances and travel times between points."""</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> __init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> locations</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="str">"""Initialize distance array."""</span><span class="pln"><br><br>&nbsp; &nbsp; num_locations </span><span class="pun">=</span><span class="pln"> len</span><span class="pun">(</span><span class="pln">locations</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">matrix </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> from_node </span><span class="kwd">in</span><span class="pln"> xrange</span><span class="pun">(</span><span class="pln">num_locations</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">matrix</span><span class="pun">[</span><span class="pln">from_node</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> to_node </span><span class="kwd">in</span><span class="pln"> xrange</span><span class="pun">(</span><span class="pln">num_locations</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; x1 </span><span class="pun">=</span><span class="pln"> locations</span><span class="pun">[</span><span class="pln">from_node</span><span class="pun">][</span><span class="lit">0</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; y1 </span><span class="pun">=</span><span class="pln"> locations</span><span class="pun">[</span><span class="pln">from_node</span><span class="pun">][</span><span class="lit">1</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; x2 </span><span class="pun">=</span><span class="pln"> locations</span><span class="pun">[</span><span class="pln">to_node</span><span class="pun">][</span><span class="lit">0</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; y2 </span><span class="pun">=</span><span class="pln"> locations</span><span class="pun">[</span><span class="pln">to_node</span><span class="pun">][</span><span class="lit">1</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">matrix</span><span class="pun">[</span><span class="pln">from_node</span><span class="pun">][</span><span class="pln">to_node</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> distance</span><span class="pun">(</span><span class="pln">x1</span><span class="pun">,</span><span class="pln"> y1</span><span class="pun">,</span><span class="pln"> x2</span><span class="pun">,</span><span class="pln"> y2</span><span class="pun">)</span><span class="pln"><br><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> </span><span class="typ">Distance</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> from_node</span><span class="pun">,</span><span class="pln"> to_node</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">matrix</span><span class="pun">[</span><span class="pln">from_node</span><span class="pun">][</span><span class="pln">to_node</span><span class="pun">])</span><span class="pln"><br><br><br></span><span class="com"># Demand callback</span><span class="pln"><br></span><span class="kwd">class</span><span class="pln"> </span><span class="typ">CreateDemandCallback</span><span class="pun">(</span><span class="kwd">object</span><span class="pun">):</span><span class="pln"><br>&nbsp; </span><span class="str">"""Create callback to get demands at each node."""</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> __init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> demands</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">matrix </span><span class="pun">=</span><span class="pln"> demands<br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> </span><span class="typ">Demand</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> from_node</span><span class="pun">,</span><span class="pln"> to_node</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">matrix</span><span class="pun">[</span><span class="pln">from_node</span><span class="pun">]</span><span class="pln"><br><br></span><span class="com"># Service time (proportional to demand) + transition time callback.</span><span class="pln"><br></span><span class="kwd">class</span><span class="pln"> </span><span class="typ">CreateServiceTimeCallback</span><span class="pun">(</span><span class="kwd">object</span><span class="pun">):</span><span class="pln"><br>&nbsp; </span><span class="str">"""Create callback to get time windows at each node."""</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> __init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> demands</span><span class="pun">,</span><span class="pln"> time_per_demand_unit</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">matrix </span><span class="pun">=</span><span class="pln"> demands<br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">time_per_demand_unit </span><span class="pun">=</span><span class="pln"> time_per_demand_unit<br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> </span><span class="typ">ServiceTime</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> from_node</span><span class="pun">,</span><span class="pln"> to_node</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">matrix</span><span class="pun">[</span><span class="pln">from_node</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">time_per_demand_unit<br><br></span><span class="com"># Create total_time callback (equals service time plus travel time).</span><span class="pln"><br></span><span class="kwd">class</span><span class="pln"> </span><span class="typ">CreateTotalTimeCallback</span><span class="pun">(</span><span class="kwd">object</span><span class="pun">):</span><span class="pln"><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> __init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> service_time_callback</span><span class="pun">,</span><span class="pln"> dist_callback</span><span class="pun">,</span><span class="pln"> speed</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">service_time_callback </span><span class="pun">=</span><span class="pln"> service_time_callback<br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">dist_callback </span><span class="pun">=</span><span class="pln"> dist_callback<br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">speed </span><span class="pun">=</span><span class="pln"> speed<br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> </span><span class="typ">TotalTime</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> from_node</span><span class="pun">,</span><span class="pln"> to_node</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">service_time_callback</span><span class="pun">(</span><span class="pln">from_node</span><span class="pun">,</span><span class="pln"> to_node</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">dist_callback</span><span class="pun">(</span><span class="pln">from_node</span><span class="pun">,</span><span class="pln"> to_node</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">speed<br><br></span><span class="kwd">def</span><span class="pln"> </span><span class="typ">DisplayPlan</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">,</span><span class="pln"> assignment</span><span class="pun">):</span><span class="pln"><br><br>&nbsp; </span><span class="com"># Display dropped orders.</span><span class="pln"><br>&nbsp; dropped </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">for</span><span class="pln"> order </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> routing</span><span class="pun">.</span><span class="pln">nodes</span><span class="pun">()):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> assignment</span><span class="pun">.</span><span class="typ">Value</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">NextVar</span><span class="pun">(</span><span class="pln">order</span><span class="pun">))</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> order</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">dropped</span><span class="pun">.</span><span class="pln">empty</span><span class="pun">()):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; dropped </span><span class="pun">+=</span><span class="pln"> </span><span class="str">" %d"</span><span class="pun">,</span><span class="pln"> order<br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">else</span><span class="pun">:</span><span class="pln"> dropped </span><span class="pun">+=</span><span class="pln"> </span><span class="str">", %d"</span><span class="pun">,</span><span class="pln"> order<br><br>&nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> dropped</span><span class="pun">.</span><span class="pln">empty</span><span class="pun">():</span><span class="pln"><br>&nbsp; &nbsp; plan_output </span><span class="pun">+=</span><span class="pln"> </span><span class="str">"Dropped orders:"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> dropped </span><span class="pun">+</span><span class="pln"> </span><span class="str">"\n"</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">return</span><span class="pln"> plan_output<br><br></span><span class="kwd">def</span><span class="pln"> main</span><span class="pun">():</span><span class="pln"><br>&nbsp; </span><span class="com"># Create the data.</span><span class="pln"><br>&nbsp; data </span><span class="pun">=</span><span class="pln"> create_data_array</span><span class="pun">()</span><span class="pln"><br>&nbsp; locations </span><span class="pun">=</span><span class="pln"> data</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"><br>&nbsp; demands </span><span class="pun">=</span><span class="pln"> data</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"><br>&nbsp; start_times </span><span class="pun">=</span><span class="pln"> data</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"><br>&nbsp; num_locations </span><span class="pun">=</span><span class="pln"> len</span><span class="pun">(</span><span class="pln">locations</span><span class="pun">)</span><span class="pln"><br>&nbsp; depot </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"><br>&nbsp; num_vehicles </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln"><br>&nbsp; search_time_limit </span><span class="pun">=</span><span class="pln"> </span><span class="lit">400000</span><span class="pln"><br><br>&nbsp; </span><span class="com"># Create routing model.</span><span class="pln"><br>&nbsp; </span><span class="kwd">if</span><span class="pln"> num_locations </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">:</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com"># The number of nodes of the VRP is num_locations.</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># Nodes are indexed from 0 to tsp_size - 1. By default the start of</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># a route is node 0.</span><span class="pln"><br>&nbsp; &nbsp; routing </span><span class="pun">=</span><span class="pln"> pywrapcp</span><span class="pun">.</span><span class="typ">RoutingModel</span><span class="pun">(</span><span class="pln">num_locations</span><span class="pun">,</span><span class="pln"> num_vehicles</span><span class="pun">,</span><span class="pln"> depot</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; search_parameters </span><span class="pun">=</span><span class="pln"> pywrapcp</span><span class="pun">.</span><span class="typ">RoutingModel</span><span class="pun">.</span><span class="typ">DefaultSearchParameters</span><span class="pun">()</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com"># Callback to the distance function.</span><span class="pln"><br><br>&nbsp; &nbsp; dist_between_locations </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CreateDistanceCallback</span><span class="pun">(</span><span class="pln">locations</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; dist_callback </span><span class="pun">=</span><span class="pln"> dist_between_locations</span><span class="pun">.</span><span class="typ">Distance</span><span class="pln"><br><br>&nbsp; &nbsp; routing</span><span class="pun">.</span><span class="typ">SetArcCostEvaluatorOfAllVehicles</span><span class="pun">(</span><span class="pln">dist_callback</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; demands_at_locations </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CreateDemandCallback</span><span class="pun">(</span><span class="pln">demands</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; demands_callback </span><span class="pun">=</span><span class="pln"> demands_at_locations</span><span class="pun">.</span><span class="typ">Demand</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com"># Add capacity dimension constraints.</span><span class="pln"><br>&nbsp; &nbsp; vehicle_capacity </span><span class="pun">=</span><span class="pln"> </span><span class="lit">100</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; null_capacity_slack </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; fix_start_cumul_to_zero </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">True</span><span class="pln"><br>&nbsp; &nbsp; capacity </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Capacity"</span><span class="pln"><br>&nbsp; &nbsp; routing</span><span class="pun">.</span><span class="typ">AddDimension</span><span class="pun">(</span><span class="pln">demands_callback</span><span class="pun">,</span><span class="pln"> null_capacity_slack</span><span class="pun">,</span><span class="pln"> vehicle_capacity</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fix_start_cumul_to_zero</span><span class="pun">,</span><span class="pln"> capacity</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com"># Adding time dimension constraints.</span><span class="pln"><br>&nbsp; &nbsp; time_per_demand_unit </span><span class="pun">=</span><span class="pln"> </span><span class="lit">300</span><span class="pln"><br>&nbsp; &nbsp; horizon </span><span class="pun">=</span><span class="pln"> </span><span class="lit">24</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3600</span><span class="pln"><br>&nbsp; &nbsp; time </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Time"</span><span class="pln"><br>&nbsp; &nbsp; tw_duration </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3600</span><span class="pln"><br>&nbsp; &nbsp; speed </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10</span><span class="pln"><br><br>&nbsp; &nbsp; service_times </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CreateServiceTimeCallback</span><span class="pun">(</span><span class="pln">demands</span><span class="pun">,</span><span class="pln"> time_per_demand_unit</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; service_time_callback </span><span class="pun">=</span><span class="pln"> service_times</span><span class="pun">.</span><span class="typ">ServiceTime</span><span class="pln"><br>&nbsp; &nbsp; total_times </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CreateTotalTimeCallback</span><span class="pun">(</span><span class="pln">service_time_callback</span><span class="pun">,</span><span class="pln"> dist_callback</span><span class="pun">,</span><span class="pln"> speed</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; total_time_callback </span><span class="pun">=</span><span class="pln"> total_times</span><span class="pun">.</span><span class="typ">TotalTime</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com"># Note: In this case fix_start_cumul_to_zero is set to False,</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># because some vehicles start their routes after time 0, due to resource constraints.</span><span class="pln"><br><br>&nbsp; &nbsp; fix_start_cumul_to_zero </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">False</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># Add a dimension for time and a limit on the total time_horizon</span><span class="pln"><br>&nbsp; &nbsp; routing</span><span class="pun">.</span><span class="typ">AddDimension</span><span class="pun">(</span><span class="pln">total_time_callback</span><span class="pun">,</span><span class="pln"> &nbsp;</span><span class="com"># total time function callback</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;horizon</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;horizon</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fix_start_cumul_to_zero</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;time</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; &nbsp; time_dimension </span><span class="pun">=</span><span class="pln"> routing</span><span class="pun">.</span><span class="typ">GetDimensionOrDie</span><span class="pun">(</span><span class="str">"Time"</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> order </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> num_locations</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; start </span><span class="pun">=</span><span class="pln"> start_times</span><span class="pun">[</span><span class="pln">order</span><span class="pun">]</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; time_dimension</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">NodeToIndex</span><span class="pun">(</span><span class="pln">order</span><span class="pun">)).</span><span class="typ">SetRange</span><span class="pun">(</span><span class="pln">start</span><span class="pun">,</span><span class="pln"> start </span><span class="pun">+</span><span class="pln"> tw_duration</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># Add resource constraints at the depot (start and end location of routes).</span><span class="pln"><br><br>&nbsp; &nbsp; vehicle_load_time </span><span class="pun">=</span><span class="pln"> </span><span class="lit">180</span><span class="pln"><br>&nbsp; &nbsp; vehicle_unload_time </span><span class="pun">=</span><span class="pln"> </span><span class="lit">180</span><span class="pln"><br>&nbsp; &nbsp; solver </span><span class="pun">=</span><span class="pln"> routing</span><span class="pun">.</span><span class="pln">solver</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; intervals </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">num_vehicles</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="com"># Add time windows at start of routes</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; intervals</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">solver</span><span class="pun">.</span><span class="typ">FixedDurationIntervalVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">Start</span><span class="pun">(</span><span class="pln">i</span><span class="pun">),</span><span class="pln"> time</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vehicle_load_time</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="str">"depot_interval"</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="com"># Add time windows at end of routes.</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; intervals</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">solver</span><span class="pun">.</span><span class="typ">FixedDurationIntervalVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">End</span><span class="pun">(</span><span class="pln">i</span><span class="pun">),</span><span class="pln"> time</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vehicle_unload_time</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="str">"depot_interval"</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># Constrain the number of maximum simultaneous intervals at depot.</span><span class="pln"><br>&nbsp; &nbsp; depot_capacity </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; depot_usage </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">num_vehicles </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)]</span><span class="pln"><br>&nbsp; &nbsp; solver</span><span class="pun">.</span><span class="typ">AddConstraint</span><span class="pun">(</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; solver</span><span class="pun">.</span><span class="typ">Cumulative</span><span class="pun">(</span><span class="pln">intervals</span><span class="pun">,</span><span class="pln"> depot_usage</span><span class="pun">,</span><span class="pln"> depot_capacity</span><span class="pun">,</span><span class="pln"> </span><span class="str">"depot"</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># Instantiate route start and end times to produce feasible times.</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">num_vehicles</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; routing</span><span class="pun">.</span><span class="typ">AddVariableMinimizedByFinalizer</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">End</span><span class="pun">(</span><span class="pln">i</span><span class="pun">),</span><span class="pln"> time</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; routing</span><span class="pun">.</span><span class="typ">AddVariableMinimizedByFinalizer</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">Start</span><span class="pun">(</span><span class="pln">i</span><span class="pun">),</span><span class="pln"> time</span><span class="pun">))</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com"># Solve, displays a solution if any.</span><span class="pln"><br>&nbsp; &nbsp; assignment </span><span class="pun">=</span><span class="pln"> routing</span><span class="pun">.</span><span class="typ">SolveWithParameters</span><span class="pun">(</span><span class="pln">search_parameters</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> assignment</span><span class="pun">:</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; </span><span class="com"># Solution distance.</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pln"> </span><span class="str">"Total distance of all routes: "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> str</span><span class="pun">(</span><span class="pln">assignment</span><span class="pun">.</span><span class="typ">ObjectiveValue</span><span class="pun">())</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">"\n"</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="com"># Display solution.</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; capacity_dimension </span><span class="pun">=</span><span class="pln"> routing</span><span class="pun">.</span><span class="typ">GetDimensionOrDie</span><span class="pun">(</span><span class="pln">capacity</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; time_dimension </span><span class="pun">=</span><span class="pln"> routing</span><span class="pun">.</span><span class="typ">GetDimensionOrDie</span><span class="pun">(</span><span class="pln">time</span><span class="pun">);</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> vehicle_nbr </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">num_vehicles</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; index </span><span class="pun">=</span><span class="pln"> routing</span><span class="pun">.</span><span class="typ">Start</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">(</span><span class="pln">vehicle_nbr</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; plan_output </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Route {0}:'</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="pln">vehicle_nbr</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">while</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> routing</span><span class="pun">.</span><span class="typ">IsEnd</span><span class="pun">(</span><span class="pln">index</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node_index </span><span class="pun">=</span><span class="pln"> routing</span><span class="pun">.</span><span class="typ">IndexToNode</span><span class="pun">(</span><span class="pln">index</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; load_var </span><span class="pun">=</span><span class="pln"> capacity_dimension</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">index</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; time_var </span><span class="pun">=</span><span class="pln"> time_dimension</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">index</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; plan_output </span><span class="pun">+=</span><span class="pln"> </span><span class="pun">\</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="str">" {node_index} Load({load}) Time({tmin}, {tmax}) -&gt; "</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node_index</span><span class="pun">=</span><span class="pln">node_index</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; load</span><span class="pun">=</span><span class="pln">assignment</span><span class="pun">.</span><span class="typ">Value</span><span class="pun">(</span><span class="pln">load_var</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmin</span><span class="pun">=</span><span class="pln">str</span><span class="pun">(</span><span class="pln">assignment</span><span class="pun">.</span><span class="typ">Min</span><span class="pun">(</span><span class="pln">time_var</span><span class="pun">)),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmax</span><span class="pun">=</span><span class="pln">str</span><span class="pun">(</span><span class="pln">assignment</span><span class="pun">.</span><span class="typ">Max</span><span class="pun">(</span><span class="pln">time_var</span><span class="pun">)))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; index </span><span class="pun">=</span><span class="pln"> assignment</span><span class="pun">.</span><span class="typ">Value</span><span class="pun">(</span><span class="pln">routing</span><span class="pun">.</span><span class="typ">NextVar</span><span class="pun">(</span><span class="pln">index</span><span class="pun">))</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; node_index </span><span class="pun">=</span><span class="pln"> routing</span><span class="pun">.</span><span class="typ">IndexToNode</span><span class="pun">(</span><span class="pln">index</span><span class="pun">)</span><span class="pln"> &nbsp;</span><span class="com"># Convert index to node</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; load_var </span><span class="pun">=</span><span class="pln"> capacity_dimension</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">index</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; time_var </span><span class="pun">=</span><span class="pln"> time_dimension</span><span class="pun">.</span><span class="typ">CumulVar</span><span class="pun">(</span><span class="pln">index</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; plan_output </span><span class="pun">+=</span><span class="pln"> </span><span class="pun">\</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="str">" {node_index} Load({load}) Time({tmin}, {tmax})"</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; node_index</span><span class="pun">=</span><span class="pln">node_index</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; load</span><span class="pun">=</span><span class="pln">assignment</span><span class="pun">.</span><span class="typ">Value</span><span class="pun">(</span><span class="pln">load_var</span><span class="pun">),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmin</span><span class="pun">=</span><span class="pln">str</span><span class="pun">(</span><span class="pln">assignment</span><span class="pun">.</span><span class="typ">Min</span><span class="pun">(</span><span class="pln">time_var</span><span class="pun">)),</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmax</span><span class="pun">=</span><span class="pln">str</span><span class="pun">(</span><span class="pln">assignment</span><span class="pun">.</span><span class="typ">Max</span><span class="pun">(</span><span class="pln">time_var</span><span class="pun">)))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pln"> plan_output<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pln"> </span><span class="str">"\n"</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">else</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pln"> </span><span class="str">'No solution found.'</span><span class="pln"><br>&nbsp; </span><span class="kwd">else</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">print</span><span class="pln"> </span><span class="str">'Specify an instance greater than 0.'</span><span class="pln"><br></span><span class="kwd">def</span><span class="pln"> create_data_array</span><span class="pun">():</span><span class="pln"><br><br>&nbsp; locations </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">82</span><span class="pun">,</span><span class="pln"> </span><span class="lit">76</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">96</span><span class="pun">,</span><span class="pln"> </span><span class="lit">44</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">50</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">49</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">13</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">29</span><span class="pun">,</span><span class="pln"> </span><span class="lit">89</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">58</span><span class="pun">,</span><span class="pln"> </span><span class="lit">30</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">84</span><span class="pun">,</span><span class="pln"> </span><span class="lit">39</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">14</span><span class="pun">,</span><span class="pln"> </span><span class="lit">24</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">12</span><span class="pun">,</span><span class="pln"> </span><span class="lit">39</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">82</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">98</span><span class="pun">,</span><span class="pln"> </span><span class="lit">52</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">84</span><span class="pun">,</span><span class="pln"> </span><span class="lit">25</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">61</span><span class="pun">,</span><span class="pln"> </span><span class="lit">59</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">65</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">88</span><span class="pun">,</span><span class="pln"> </span><span class="lit">51</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">91</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">19</span><span class="pun">,</span><span class="pln"> </span><span class="lit">32</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">93</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">50</span><span class="pun">,</span><span class="pln"> </span><span class="lit">93</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">98</span><span class="pun">,</span><span class="pln"> </span><span class="lit">14</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">42</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">42</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">61</span><span class="pun">,</span><span class="pln"> </span><span class="lit">62</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">97</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">80</span><span class="pun">,</span><span class="pln"> </span><span class="lit">55</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">57</span><span class="pun">,</span><span class="pln"> </span><span class="lit">69</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">23</span><span class="pun">,</span><span class="pln"> </span><span class="lit">15</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">20</span><span class="pun">,</span><span class="pln"> </span><span class="lit">70</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">85</span><span class="pun">,</span><span class="pln"> </span><span class="lit">60</span><span class="pun">],</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="pun">[</span><span class="lit">98</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">]]</span><span class="pln"><br><br>&nbsp; demands </span><span class="pun">=</span><span class="pln"> &nbsp;</span><span class="pun">[</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">19</span><span class="pun">,</span><span class="pln"> </span><span class="lit">21</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">19</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">12</span><span class="pun">,</span><span class="pln"> </span><span class="lit">16</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">16</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">14</span><span class="pun">,</span><span class="pln"> </span><span class="lit">21</span><span class="pun">,</span><span class="pln"> </span><span class="lit">16</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">22</span><span class="pun">,</span><span class="pln"> </span><span class="lit">18</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="lit">19</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">24</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">12</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">24</span><span class="pun">,</span><span class="pln"> </span><span class="lit">24</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">20</span><span class="pun">,</span><span class="pln"> </span><span class="lit">15</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">14</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]</span><span class="pln"><br><br>&nbsp; start_times </span><span class="pun">=</span><span class="pln"> &nbsp;</span><span class="pun">[</span><span class="lit">28842</span><span class="pun">,</span><span class="pln"> </span><span class="lit">50891</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10351</span><span class="pun">,</span><span class="pln"> </span><span class="lit">49370</span><span class="pun">,</span><span class="pln"> </span><span class="lit">22553</span><span class="pun">,</span><span class="pln"> </span><span class="lit">53131</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8908</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="lit">56509</span><span class="pun">,</span><span class="pln"> </span><span class="lit">54032</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10883</span><span class="pun">,</span><span class="pln"> </span><span class="lit">60235</span><span class="pun">,</span><span class="pln"> </span><span class="lit">46644</span><span class="pun">,</span><span class="pln"> </span><span class="lit">35674</span><span class="pun">,</span><span class="pln"> </span><span class="lit">30304</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="lit">39950</span><span class="pun">,</span><span class="pln"> </span><span class="lit">38297</span><span class="pun">,</span><span class="pln"> </span><span class="lit">36273</span><span class="pun">,</span><span class="pln"> </span><span class="lit">52108</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2333</span><span class="pun">,</span><span class="pln"> </span><span class="lit">48986</span><span class="pun">,</span><span class="pln"> </span><span class="lit">44552</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="lit">31869</span><span class="pun">,</span><span class="pln"> </span><span class="lit">38027</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5532</span><span class="pun">,</span><span class="pln"> </span><span class="lit">57458</span><span class="pun">,</span><span class="pln"> </span><span class="lit">51521</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11039</span><span class="pun">,</span><span class="pln"> </span><span class="lit">31063</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="lit">38781</span><span class="pun">,</span><span class="pln"> </span><span class="lit">49169</span><span class="pun">,</span><span class="pln"> </span><span class="lit">32833</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7392</span><span class="pun">]</span><span class="pln"><br><br>&nbsp; data </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">locations</span><span class="pun">,</span><span class="pln"> demands</span><span class="pun">,</span><span class="pln"> start_times</span><span class="pun">]</span><span class="pln"><br>&nbsp; </span><span class="kwd">return</span><span class="pln"> data<br><br></span><span class="kwd">if</span><span class="pln"> __name__ </span><span class="pun">==</span><span class="pln"> </span><span class="str">'__main__'</span><span class="pun">:</span><span class="pln"><br>&nbsp; main</span><span class="pun">()</span></pre>

  
  </div>
  

  
        
  







        
<div class="devsite-content-footer nocontent">
  
  
    <p>Except as otherwise noted, the content of this page is licensed under the <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see our <a href="https://developers.google.cn/terms/site-policies">Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
  

  
    
    <p class="devsite-content-footer-date" itemprop="datePublished" content="2019-01-03T18:50:22.548376">
      
      上次更新日期：一月 3, 2019
    </p>
  

</div>

        </article>
      </article>
  

        </div>
      

<footer class="devsite-footer-promos nocontent"><nav class="devsite-full-site-width"><ul class="devsite-footer-promos-list"><li class="devsite-footer-promo"><a href="http://github.com/google/or-tools" class="devsite-footer-promo-title gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Content Page Footer Promo"><img class="devsite-footer-promo-icon" src="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/logo-github.svg">
          
          
            GitHub
          
        </a><div class="devsite-footer-promo-description">Download our code</div></li><li class="devsite-footer-promo"><a href="https://groups.google.com/forum/#!forum/or-tools-discuss" class="devsite-footer-promo-title gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Content Page Footer Promo" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。"><img class="devsite-footer-promo-icon" src="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/groups_24dp.png">
          
          
            Discussion forum
          
        </a><div class="devsite-footer-promo-description">Visit our forum</div></li><li class="devsite-footer-promo"><a href="http://or-tools.blogspot.com/" class="devsite-footer-promo-title gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Content Page Footer Promo" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。"><img class="devsite-footer-promo-icon" src="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/blogger_24dp.png">
          
          
            Blog
          
        </a><div class="devsite-footer-promo-description">Read our blog</div></li></ul></nav></footer><footer class="devsite-footer-linkboxes nocontent
               devsite-footer-linkboxes-all-backup
               devsite-footer-linkboxes-with-sites"><nav class="devsite-full-site-width"><ul class="devsite-footer-linkboxes-list"><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">社交沟通</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="http://developers.googleblog.cn/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Blog Link">
                博客
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://www.facebook.com/Google-Developers-967415219957038/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Facebook Link">
                Facebook
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://plus.google.com/+GoogleDevelopers" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer G+ Link" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Google+
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://medium.com/google-developers" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Medium Link">
                Medium
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://twitter.com/googledevs" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Twitter Link">
                Twitter
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://www.youtube.com/channel/UCQqa5UIHtrnpiADC3eHFupw" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer YouTube Link" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                YouTube
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">计划</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://www.womentechmakers.com/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Women Techmakers">
                Women Techmakers
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.cn/agency/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Agency">
                Agency Program
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.cn/groups/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Groups">
                GDG
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.cn/experts/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Experts">
                Google Developers Experts
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.cn/startups/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Startups">
                Startup Launchpad
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://userresearch.google.com/?reserved=0&amp;utm_source=developers.google.com&amp;Q_Language=en&amp;utm_medium=own_srch&amp;utm_campaign=Global-developers&amp;utm_term=0&amp;utm_content=0&amp;productTag=clou&amp;campaignDate=nov18&amp;pType=devel&amp;referral_code=js564523" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer User Studies" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                User Studies
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">开发者控制台</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://console.developers.google.com/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Console" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Google API Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://console.cloud.google.com/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Google Cloud Platform Console" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Google Cloud Platform Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://play.google.com/apps/publish/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Google Play Console" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Google Play Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://console.firebase.google.com/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Firebase Console" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Firebase Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://console.actions.google.com/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Actions on Google Console" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Actions on Google Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cast.google.com/publish/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Cast SDK Developer Console" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Cast SDK Developer Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://chrome.google.com/webstore/developer/dashboard" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Chrome Web Store Developer Dashboard" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Chrome Web Store Dashboard
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-sites"><a href="https://developers.google.cn/" class="gc-analytics-event devsite-footer-linkbox-logo-link" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link"><img class="devsite-footer-linkbox-logo" src="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/lockup-color-knockout.png" alt="Google Developers"></a><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://developer.android.google.cn/index.html" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Android Link">
                Android
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developer.chrome.com/home" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Chrome Link" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Chrome
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://firebase.google.cn/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Firebase Link">
                Firebase
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Cloud Link" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Google Cloud Platform
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.cn/products/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Products Link">
                所有产品
            </a></li></ul></li></ul></nav></footer><footer class="devsite-utility-footer"><nav class="devsite-utility-footer-nav devsite-nav devsite-full-site-width"><div class="devsite-utility-footer-nav-left"><form class="devsite-utility-footer-language" action="https://developers.google.cn/i18n/setlang/" method="post"><input type="hidden" name="xsrf_token" value="FF8W8BTdPAjb3QXn41nN_zovgiKptofpDyN_lMMO0cw6MTU0NzAxNDA1MTU2MDE3Mw"><input type="hidden" name="next" value="/optimization/routing/cvrptw_resources"><select class="devsite-utility-footer-language-select kd-select" name="language" track-type="languageSelector" track-name="click" style="display: none;"><option value="id" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="id" track-metadata-original-language="zh-cn" track-metadata-selected-language="id">
            Bahasa Indonesia
          </option><option value="de" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="de" track-metadata-original-language="zh-cn" track-metadata-selected-language="de">
            Deutsch
          </option><option value="en" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="en" track-metadata-original-language="zh-cn" track-metadata-selected-language="en">
            English
          </option><option value="es" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="es" track-metadata-original-language="zh-cn" track-metadata-selected-language="es">
            español
          </option><option value="fr" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="fr" track-metadata-original-language="zh-cn" track-metadata-selected-language="fr">
            français
          </option><option value="pt-br" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="pt-br" track-metadata-original-language="zh-cn" track-metadata-selected-language="pt-br">
            Português Brasileiro
          </option><option value="ru" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="ru" track-metadata-original-language="zh-cn" track-metadata-selected-language="ru">
            Русский
          </option><option value="ja" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="ja" track-metadata-original-language="zh-cn" track-metadata-selected-language="ja">
            日本語
          </option><option value="zh-cn" selected="selected" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="zh-cn" track-metadata-original-language="zh-cn" track-metadata-selected-language="zh-cn">
            简体中文
          </option><option value="ko" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="ko" track-metadata-original-language="zh-cn" track-metadata-selected-language="ko">
            한국어
          </option></select><span class="kd-button kd-menubutton kd-select" track-type="languageSelector" track-name="click"><div class="label">
            简体中文
          </div><div class="kd-disclosureindicator"></div></span></form><span class="devsite-utility-footer-links"><a class="devsite-utility-footer-link gc-analytics-event" href="https://developers.google.cn/terms/site-terms" data-category="Site-Wide Custom Events" data-label="Footer terms link" data-footer-link-id="terms">条款
         </a><a class="devsite-utility-footer-link gc-analytics-event" href="https://policies.google.cn/privacy" data-category="Site-Wide Custom Events" data-label="Footer privacy link" data-footer-link-id="privacy" data-cookie-policy="//policies.google.cn/technologies/cookies">隐私权
         </a></span></div></nav></footer><div class="devsite-feedback-dialog devsite-dialog"><div class="devsite-dialog-contents"><h3>发送以下问题的反馈：</h3><div class="devsite-feedback-item"><a data-type="documentation" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Docs Feedback Image" track-type="feedback" track-name="feedbackDocIcon" track-metadata-position="header"><div class="devsite-feedback-item-icon-container"><div class="devsite-feedback-item-icon-white devsite-feedback-item-icon-docs
                        material-icons"></div></div></a><div class="devsite-feedback-item-name">
          
          此网页
        </div><div class="devsite-feedback-item-description"><a data-type="documentation" tabindex="0" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Docs Feedback Text" track-type="feedback" track-name="feedbackDocText" track-metadata-position="header">
            
            文档反馈
          </a></div></div><div class="devsite-feedback-item"><a data-type="product" tabindex="0" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Product Feedback Image" track-type="feedback" track-name="feedbackProductIcon" track-metadata-position="header"><img src="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/orLogo.png" class="devsite-feedback-item-icon" alt="OR-Tools"></a><div class="devsite-feedback-item-name">
        OR-Tools
        </div><div class="devsite-feedback-item-description"><a data-type="product" tabindex="0" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Product Feedback Text" track-type="feedback" track-name="feedbackProductText" track-metadata-position="header">
            
            产品反馈
          </a></div></div></div><div class="devsite-dialog-buttons"><button type="button" class="devsite-feedback-cancel button-white gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Cancel Feedback Button" track-type="feedback" track-name="cancelFeedbackButton" track-metadata-position="header">
        
        取消
      </button></div></div><script>
  $(document).ready(function() {
    new devsite.feedback.Widget({
        'product_id': '106275',
        'bucket': '',
        'context': 'DevSite feedback link',
        'version': 'devsite-20190107-r00-rc01.default'
      },
      document.querySelectorAll('.devsite-feedback-button'),
      'zh-cn',
      document.querySelector('.devsite-site-mask'),
      document.querySelector('.devsite-feedback-dialog'),
      document.querySelector('.devsite-feedback-cancel'),
      document.querySelectorAll('.devsite-feedback-item a:not([href])')
    );
  });
  </script></div><script async="" defer="" src="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/api.js"></script><script src="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/saved_resource"></script><script src="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/script_foot_closure__zh_cn.js"></script><script src="./Vehicle Routing with Resource Constraints  _  OR-Tools  _  Google Developers_files/script_foot.js"></script><script>
        (function($) {
          
          devsite.devsite.Init($, {'ENABLE_BLOCKED_VIDEO_PLACEHOLDER': 1, 'SITE_NAME': 'devsite_china', 'FULL_SITE_SEARCH_ENABLED': 0, 'ENABLE_CLOUDTRACK': 0, 'VTAGS_ENABLED': 0, 'HISTORY_ENABLED': 0, 'SIDEBAR_MINI_ENABLED': 0, 'VERSION_HASH': '0ee1984e83', 'SCRIPTSAFE_DOMAIN': 'google-developers.gonglchuangl.net', 'ENABLE_BLOCKED_LINK_TOOLTIP': 1, 'ALLOWED_HOSTS': ['.android.com', '.appspot.com', '.gonglchuangl.net', '.google.cn', '.google.com', '.googleplex.com', '.tensorflow.org'], 'BLOCK_RSS_FEEDS': 1},
                               '[]','zh-cn',
                               true, '',
                               {"8e03e230de0bd8a6fe173fdf172e8b3f": true, "8de7a048f21618359bd37f5ce44be073": false, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "d169d485cf24243a263783dbe42029b1": true, "039e5d84b87fd75807ffb37b7f1bbf2c": true, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true, "098dafe57affddc137df300142652cfd": false}, '/optimization/',
                               'https://developers.google.cn/');
        })(jQuery);

        
        devsite.localInit = function() {
          
        };

      </script><script>
      $('.devsite-utility-footer-language-select').each(function() {
        $(this).change(function(){$('.devsite-utility-footer-language').submit();});
      });
      </script></div><span id="devsite-request-elapsed" data-request-elapsed="168.510913849"></span>
<ul class="kd-menulist devsite-hidden" style="left: 23.9946px; right: auto; top: 9264.06px;"><li class="kd-menulistitem" value="id" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="id" track-metadata-original-language="zh-cn" track-metadata-selected-language="id">
            Bahasa Indonesia
          </li><li class="kd-menulistitem" value="de" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="de" track-metadata-original-language="zh-cn" track-metadata-selected-language="de">
            Deutsch
          </li><li class="kd-menulistitem" value="en" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="en" track-metadata-original-language="zh-cn" track-metadata-selected-language="en">
            English
          </li><li class="kd-menulistitem" value="es" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="es" track-metadata-original-language="zh-cn" track-metadata-selected-language="es">
            español
          </li><li class="kd-menulistitem" value="fr" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="fr" track-metadata-original-language="zh-cn" track-metadata-selected-language="fr">
            français
          </li><li class="kd-menulistitem" value="pt-br" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="pt-br" track-metadata-original-language="zh-cn" track-metadata-selected-language="pt-br">
            Português Brasileiro
          </li><li class="kd-menulistitem" value="ru" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="ru" track-metadata-original-language="zh-cn" track-metadata-selected-language="ru">
            Русский
          </li><li class="kd-menulistitem" value="ja" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="ja" track-metadata-original-language="zh-cn" track-metadata-selected-language="ja">
            日本語
          </li><li class="kd-menulistitem devsite-selected-option" value="zh-cn" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="zh-cn" track-metadata-original-language="zh-cn" track-metadata-selected-language="zh-cn">
            简体中文
          </li><li class="kd-menulistitem" value="ko" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="ko" track-metadata-original-language="zh-cn" track-metadata-selected-language="ko">
            한국어
          </li></ul></body></html>