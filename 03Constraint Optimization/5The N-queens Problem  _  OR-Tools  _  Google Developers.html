<!DOCTYPE html>
<!-- saved from url=(0051)https://developers.google.cn/optimization/cp/queens -->
<html lang="en" class="" ml-update="aware"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" async="" src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/linkid.js"></script><script async="" src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/analytics.js"></script><script>var a=window.devsite||{};window.devsite=a;a.readyCallbacks=[];window.devsite.readyCallbacks=a.readyCallbacks;a.ready=function(b){a.readyCallbacks.push(b)};window.devsite.ready=a.ready;
</script><meta name="xsrf_token" content="FxnZ5FNob7bbvz8IJN5dfTfZEf65QTDSFdVyxBncieA6MTU0NzAxNzQ4NzU5Njk1MQ"><link rel="canonical" href="https://developers.google.com/optimization/cp/queens"><link rel="alternate" href="https://developers.google.com/optimization/cp/queens" hreflang="en"><link rel="alternate" href="https://developers.google.cn/optimization/cp/queens" hreflang="en-cn"><link rel="alternate" href="https://developers.google.com/optimization/cp/queens" hreflang="x-default"><link rel="shortcut icon" href="https://developers.google.cn/_static/0ee1984e83/images/favicon.png"><link rel="apple-touch-icon" href="https://developers.google.cn/_static/0ee1984e83/images/touch-icon.png"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/css"><link rel="stylesheet" href="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/devsite-google-blue.css"><script src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/jquery-bundle.js"></script><meta property="og:site_name" content="Google Developers"><meta property="og:type" content="website"><meta property="og:url" content="https://developers.google.com/optimization/cp/queens"><meta property="og:locale" content="en"><script>
    var ___gcfg = ___gcfg || {};
    ___gcfg.lang = 'zh-cn';
  </script><title>The N-queens Problem &nbsp;|&nbsp; OR-Tools
      &nbsp;|&nbsp; Google Developers</title><meta property="og:title" content="The N-queens Problem  |  OR-Tools
       |  Google Developers"></head><body class="devsite-doc-page devsite-header-no-upper-tabs no-touch" data-family="endorsed" id="top_of_page"><div class="devsite-wrapper" style="margin-top: 0px;"><div class="devsite-top-section-wrapper
            "><header class="devsite-top-section nocontent devsite-top-section-pinned"><div class="devsite-top-logo-row-wrapper-wrapper" style="position: relative;"><div class="devsite-top-logo-row-wrapper"><div class="devsite-top-logo-row devsite-full-site-width"><button type="button" class="devsite-expand-section-nav devsite-header-icon-button
                                       button-flat material-icons gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Hamburger menu"></button><div class="devsite-product-name-wrapper"><a class="devsite-product-name-link gc-analytics-event" href="https://developers.google.cn/optimization/" data-category="Site-Wide Custom Events" data-label="Project logo (header)"><img src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/orLogo.png" class="devsite-product-logo" alt="Google OR-Tools"></a><span class="devsite-product-name"><ul class="devsite-breadcrumb-list"><li class="devsite-breadcrumb-item"><a href="https://developers.google.cn/optimization/" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Upper Header" data-value="1">
    
    
      
        Google OR-Tools
      
    
    
    </a></li></ul></span></div><div class="devsite-header-upper-tabs"></div><form class="devsite-search-form" action="https://developers.google.cn/s/results/" method="GET" id="top-search" search-placeholder="搜索"><div id="searchbox" class="devsite-searchbox"><input placeholder="搜索" type="text" class="devsite-search-field devsite-search-query" name="q" value="" autocomplete="off" aria-label="搜索框"><div class="devsite-search-image material-icons"></div></div><input type="hidden" name="p" id="search_project" value="/optimization/" data-project-name="OR-Tools" data-project-path="/optimization/" data-query-match=""><input type="hidden" class="suggest-project" value="OR-Tools"><div class="suggest-project-metadata" data-home_url="/optimization/" data-path="/optimization/" data-name="OR-Tools"></div><div class="devsite-popout devsite-popout-closed"><div class="devsite-suggest-results" style="display: none;"></div></div></form><a class="devsite-header-link devsite-top-button button gc-analytics-event" href="https://developers.google.cn/products/" data-category="Site-Wide Custom Events" data-label="Site header link" track-type="globalNav" track-name="所有产品" track-metadata-position="nav" track-metadata-eventdetail="nav"><div class="devsite-header-link-icon material-icons">
                  list
                </div><div class="devsite-header-link-label">所有产品</div></a><button type="button" class="devsite-search-button devsite-header-icon-button button-flat
                                       material-icons"></button></div></div></div><div class="devsite-collapsible-section" style="margin-top: 0px;"><div class="devsite-header-background devsite-full-site-width"><div class="devsite-doc-set-nav-row devsite-full-site-width"><nav class="devsite-doc-set-nav devsite-nav devsite-overflow-tabs-scroll-wrapper"><ul class="devsite-doc-set-nav-tab-list devsite-overflow-tabs-scroll" style="min-width: 550px; left: 0px;"><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.cn/optimization/" class=" devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Tab: 首页">
          首页
        </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.cn/optimization/install" class=" devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Tab: Installation">
          Installation
        </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.cn/optimization/introduction/overview" class="devsite-doc-set-nav-active devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event" aria-label="Guides, selected" data-category="Site-Wide Custom Events" data-label="Tab: Guides">
          Guides
        </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.cn/optimization/reference" class=" devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Tab: Reference">
          Reference
        </a></li><li class="devsite-doc-set-nav-tab-container devsite-nav-tab
                 "><a href="https://developers.google.cn/optimization/support/overview" class=" devsite-nav-tab
                  devsite-doc-set-nav-tab devsite-doc-set-nav-tab-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Tab: Support">
          Support
        </a></li></ul><button type="button" class="devsite-overflow-tabs-scroll-button devsite-top-button material-icons devsite-scroll-forward devsite-hidden" aria-label="滚动标签"></button><button type="button" class="devsite-overflow-tabs-scroll-button devsite-top-button material-icons devsite-scroll-back devsite-hidden" aria-label="滚动标签"></button></nav></div></div></div></header><script>
    if (window.jQuery) {
      $(document).ready(function() {
        if (window.devsite && window.devsite.search) {
          
          window.devsite.search.init('zh-cn')
        }
      });
    }
  </script></div><div id="gc-wrapper" itemscope="" itemtype="http://schema.org/Article"><input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {}, &quot;gaid&quot;: &quot;UA-10115507-7&quot;}"><input class="google-analytics-id-json" type="hidden" value="{&quot;dimensions&quot;: {&quot;dimension6&quot;: &quot;en&quot;, &quot;dimension4&quot;: &quot;OR-Tools&quot;, &quot;dimension5&quot;: &quot;zh-cn&quot;, &quot;dimension3&quot;: false, &quot;dimension1&quot;: &quot;Signed out&quot;, &quot;dimension8&quot;: null}, &quot;gaid&quot;: &quot;UA-24532603-11&quot;}"><script>
      var dataLayer = [{"freeTrialEligibleUser": "False", "userCountry": "CN", "language": {"requested": "zh-cn", "served": "en"}, "projectName": "OR-Tools", "scriptsafe": null, "signedIn": "False", "internalUser": "False"}];
    </script>

      
        <div class="devsite-site-mask"></div>
        
  


<nav class="devsite-nav-responsive devsite-nav nocontent" tabindex="0" style="left: -256px;">
  
  <div class="devsite-nav-responsive-tabs-panel devsite-nav-responsive-transition devsite-nav-responsive-transform" style="display: none;">
    
      



<nav class="devsite-nav-responsive-tabs devsite-nav">
  <ul class="devsite-nav-list">
  

  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <a href="https://developers.google.cn/optimization/" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                  " data-category="Site-Wide Custom Events" data-label="Responsive Tab: 首页"><span>
          首页
        </span></a>
      

      

      

      
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <a href="https://developers.google.cn/optimization/install?nav=true" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                  " data-category="Site-Wide Custom Events" data-label="Responsive Tab: Installation"><span>
          Installation
        </span></a>
      

      

      

      
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <span class="devsite-nav-responsive-forward devsite-nav-responsive-tab devsite-nav-title
                     devsite-nav-active gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Responsive Tab: Guides" tabindex="0"><span>
          Guides
        </span></span>
      

      

      

      
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <a href="https://developers.google.cn/optimization/reference" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                  " data-category="Site-Wide Custom Events" data-label="Responsive Tab: Reference"><span>
          Reference
        </span></a>
      

      

      

      
    </li>
  
    <li class="devsite-nav-item devsite-nav-item-heading">
      
        <a href="https://developers.google.cn/optimization/support/overview?nav=true" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event
                  " data-category="Site-Wide Custom Events" data-label="Responsive Tab: Support"><span>
          Support
        </span></a>
      

      

      

      
    </li>
  

  
    <li class="devsite-nav-item devsite-nav-item-heading">
      <a href="https://developers.google.cn/products/" class="devsite-nav-responsive-tab devsite-nav-title gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Responsive Tab: all_products"><span>
        所有产品
      </span></a>
    </li>
  
  </ul>
</nav>


    
  </div>
  
  
  <div class="devsite-nav-responsive-sidebar-panel" style="display: block;">
    
    <div class="devsite-nav-responsive-back" tabindex="0"></div>
    
    <nav class="devsite-nav-responsive-sidebar">
      
      
    <ul class="devsite-nav-list devsite-nav-expandable devsite-nav-only-accordions"><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Introduction, click to expand/collapse" role="link" tabindex="0"><span>Introduction</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/overview" class="devsite-nav-title"><span>About Combinatorial Optimization</span></a></li><li class="devsite-nav-item devsite-nav-item-section-expandable"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Get Started with OR-Tools, click to expand/collapse" role="link" tabindex="0"><span>Get Started with OR-Tools</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="1" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/get_started" class="devsite-nav-title"><span>概览</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/cpp" class="devsite-nav-title"><span>C++</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/python" class="devsite-nav-title"><span>Python</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/java" class="devsite-nav-title"><span>Java</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/cs" class="devsite-nav-title"><span>C#</span></a></li></ul></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Linear Optimization, click to expand/collapse" role="link" tabindex="0"><span>Linear Optimization</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/lp" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/lp/glop" class="devsite-nav-title"><span>The Glop Linear Solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/lp/add-on" class="devsite-nav-title"><span>Add-on for Google Sheets</span></a></li><li class="devsite-nav-item devsite-nav-external devsite-nav-has-status"><a href="https://developers.google.cn/apps-script/reference/optimization" class="devsite-nav-title"><span class="devsite-nav-text"><span>Service for Apps Script</span></span><span class="devsite-nav-icon-wrapper"><span class="devsite-nav-icon material-icons" data-tooltip-align="b,c" data-tooltip="外部" aria-label="外部" data-title="外部"></span></span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Constraint Optimization, click to expand/collapse" role="link" tabindex="0"><span>Constraint Optimization</span></span><a class="devsite-nav-toggle devsite-nav-toggle-expanded material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0"></a><ul class="devsite-nav-section devsite-nav-section-expanded"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/cp_solver" class="devsite-nav-title"><span>CP-SAT Solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/original_cp_solver" class="devsite-nav-title"><span>Original CP Solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/cryptarithmetic" class="devsite-nav-title"><span>Cryptarithmetic</span></a></li><li class="devsite-nav-item devsite-nav-active"><a href="https://developers.google.cn/optimization/cp/queens" class="devsite-nav-title"><span>The N-queens Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/cp_tasks" class="devsite-nav-title"><span>Setting Solver Limits</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Integer Optimization, click to expand/collapse" role="link" tabindex="0"><span>Integer Optimization</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip/integer_opt" class="devsite-nav-title"><span>Mixed-Integer Programming</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip/integer_opt_cp" class="devsite-nav-title"><span>CP Approach to Integer Optimization</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip/sudoku" class="devsite-nav-title"><span>Sudoku Add-on for Google Sheets</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Routing, click to expand/collapse" role="link" tabindex="0"><span>Routing</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/tsp" class="devsite-nav-title"><span>Traveling Salesman Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/vrp" class="devsite-nav-title"><span>Vehicle Routing Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrp" class="devsite-nav-title"><span>Capacity Constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw" class="devsite-nav-title"><span>Time Window Constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources" class="devsite-nav-title"><span>Resource Constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/penalties" class="devsite-nav-title"><span>Dropping Visits in Infeasible Problems-Penalties</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/routing_tasks" class="devsite-nav-title"><span>Common Vehicle Routing Tasks</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/routing_options" class="devsite-nav-title"><span>Routing Options</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/google_direction" class="devsite-nav-title"><span>Google Direction API</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Bin Packing, click to expand/collapse" role="link" tabindex="0"><span>Bin Packing</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/bin" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/bin/knapsack" class="devsite-nav-title"><span>Knapsacks</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Network Flows, click to expand/collapse" role="link" tabindex="0"><span>Network Flows</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/flow" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/flow/maxflow" class="devsite-nav-title"><span>Maximum Flows</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/flow/mincostflow" class="devsite-nav-title"><span>Minimum Cost Flows</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Assignment, click to expand/collapse" role="link" tabindex="0"><span>Assignment</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/simple_assignment" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_min_cost_flow" class="devsite-nav-title"><span>Assignment as a Min Cost Flow Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_mip" class="devsite-nav-title"><span>Assignment as a MIP Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_cp" class="devsite-nav-title"><span>Assignment with Task Sizes</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_groups" class="devsite-nav-title"><span>Assignment with Allowed Groups</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Scheduling, click to expand/collapse" role="link" tabindex="0"><span>Scheduling</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/scheduling" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/scheduling/employee_scheduling" class="devsite-nav-title"><span>Employee Scheduling</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/scheduling/job_shop" class="devsite-nav-title"><span>The Job Shop Problem</span></a></li></ul></li></ul></nav>
  </div>
  
  
</nav>


        <div class="devsite-main-content clearfix" style="margin-top: 136px;">

        
        

        
  
  
    
    
      
  <nav class="devsite-section-nav devsite-nav nocontent" style="left: auto; max-height: 628px; position: relative; top: 0px;">
    <ul class="devsite-nav-list devsite-nav-expandable devsite-nav-only-accordions"><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Introduction, click to expand/collapse" role="link" tabindex="0"><span>Introduction</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/overview" class="devsite-nav-title"><span>About Combinatorial Optimization</span></a></li><li class="devsite-nav-item devsite-nav-item-section-expandable"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Get Started with OR-Tools, click to expand/collapse" role="link" tabindex="0"><span>Get Started with OR-Tools</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="1" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/get_started" class="devsite-nav-title"><span>概览</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/cpp" class="devsite-nav-title"><span>C++</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/python" class="devsite-nav-title"><span>Python</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/java" class="devsite-nav-title"><span>Java</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/introduction/cs" class="devsite-nav-title"><span>C#</span></a></li></ul></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Linear Optimization, click to expand/collapse" role="link" tabindex="0"><span>Linear Optimization</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/lp" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/lp/glop" class="devsite-nav-title"><span>The Glop Linear Solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/lp/add-on" class="devsite-nav-title"><span>Add-on for Google Sheets</span></a></li><li class="devsite-nav-item devsite-nav-external devsite-nav-has-status"><a href="https://developers.google.cn/apps-script/reference/optimization" class="devsite-nav-title"><span class="devsite-nav-text"><span>Service for Apps Script</span></span><span class="devsite-nav-icon-wrapper"><span class="devsite-nav-icon material-icons" data-tooltip-align="b,c" data-tooltip="外部" aria-label="外部" data-title="外部"></span></span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Constraint Optimization, click to expand/collapse" role="link" tabindex="0"><span>Constraint Optimization</span></span><a class="devsite-nav-toggle devsite-nav-toggle-expanded material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0"></a><ul class="devsite-nav-section devsite-nav-section-expanded"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/cp_solver" class="devsite-nav-title"><span>CP-SAT Solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/original_cp_solver" class="devsite-nav-title"><span>Original CP Solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/cryptarithmetic" class="devsite-nav-title"><span>Cryptarithmetic</span></a></li><li class="devsite-nav-item devsite-nav-active"><a href="https://developers.google.cn/optimization/cp/queens" class="devsite-nav-title"><span>The N-queens Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/cp_tasks" class="devsite-nav-title"><span>Setting Solver Limits</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Integer Optimization, click to expand/collapse" role="link" tabindex="0"><span>Integer Optimization</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip/integer_opt" class="devsite-nav-title"><span>Mixed-Integer Programming</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip/integer_opt_cp" class="devsite-nav-title"><span>CP Approach to Integer Optimization</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/mip/sudoku" class="devsite-nav-title"><span>Sudoku Add-on for Google Sheets</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Routing, click to expand/collapse" role="link" tabindex="0"><span>Routing</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/tsp" class="devsite-nav-title"><span>Traveling Salesman Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/vrp" class="devsite-nav-title"><span>Vehicle Routing Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrp" class="devsite-nav-title"><span>Capacity Constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw" class="devsite-nav-title"><span>Time Window Constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/cvrptw_resources" class="devsite-nav-title"><span>Resource Constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/penalties" class="devsite-nav-title"><span>Dropping Visits in Infeasible Problems-Penalties</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/routing_tasks" class="devsite-nav-title"><span>Common Vehicle Routing Tasks</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/routing_options" class="devsite-nav-title"><span>Routing Options</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/routing/google_direction" class="devsite-nav-title"><span>Google Direction API</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Bin Packing, click to expand/collapse" role="link" tabindex="0"><span>Bin Packing</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/bin" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/bin/knapsack" class="devsite-nav-title"><span>Knapsacks</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Network Flows, click to expand/collapse" role="link" tabindex="0"><span>Network Flows</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/flow" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/flow/maxflow" class="devsite-nav-title"><span>Maximum Flows</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/flow/mincostflow" class="devsite-nav-title"><span>Minimum Cost Flows</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Assignment, click to expand/collapse" role="link" tabindex="0"><span>Assignment</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/simple_assignment" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_min_cost_flow" class="devsite-nav-title"><span>Assignment as a Min Cost Flow Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_mip" class="devsite-nav-title"><span>Assignment as a MIP Problem</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_cp" class="devsite-nav-title"><span>Assignment with Task Sizes</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/assignment/assignment_groups" class="devsite-nav-title"><span>Assignment with Allowed Groups</span></a></li></ul></li><li class="devsite-nav-item devsite-nav-item-section-expandable devsite-nav-accordion"><span class="devsite-nav-title devsite-nav-title-no-path" aria-label="Scheduling, click to expand/collapse" role="link" tabindex="0"><span>Scheduling</span></span><a class="devsite-nav-toggle devsite-nav-toggle-collapsed material-icons" track-type="leftNav" track-name="expandNavSectionArrow" track-metadata-position="0" aria-hidden="true"></a><ul class="devsite-nav-section devsite-nav-section-collapsed"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/scheduling" class="devsite-nav-title"><span>Overview</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/scheduling/employee_scheduling" class="devsite-nav-title"><span>Employee Scheduling</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/scheduling/job_shop" class="devsite-nav-title"><span>The Job Shop Problem</span></a></li></ul></li></ul>
  </nav>

    

    
  <nav class="devsite-page-nav devsite-nav" style="position: relative; left: auto; max-height: 628px; top: 0px;"><ul class="devsite-page-nav-list"><li class="devsite-nav-item devsite-nav-item-heading"><a href="https://developers.google.cn/optimization/cp/queens#top_of_page" class="devsite-nav-title"><span>目录</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#cp_solver" class="devsite-nav-title"><span>CP approach to the N-queens problem</span></a><ul class="devsite-page-nav-list"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#4queens" class="devsite-nav-title"><span>Propagation and backtracking</span></a></li></ul></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solving" class="devsite-nav-title"><span>Solution using CP-SAT</span></a><ul class="devsite-page-nav-list"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solver" class="devsite-nav-title"><span>Declare the model</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#variables" class="devsite-nav-title"><span>Create the variables</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#constraints" class="devsite-nav-title"><span>Create the constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solution_printer" class="devsite-nav-title"><span>Create a solution printer</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solution" class="devsite-nav-title"><span>Call the solver and display the results</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#diagram" class="devsite-nav-title"><span>An alternative solution printer</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#program" class="devsite-nav-title"><span>The entire program</span></a></li></ul></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solving_ori" class="devsite-nav-title"><span>Solution using the original CP solver</span></a><ul class="devsite-page-nav-list"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solver_ori" class="devsite-nav-title"><span>Declare the solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#variables_ori" class="devsite-nav-title"><span>Create the variables</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#constraints_ori" class="devsite-nav-title"><span>Create the constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#decision_builder" class="devsite-nav-title"><span>Add the decision builder</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solution_ori" class="devsite-nav-title"><span>Call the solver and display the results</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#program" class="devsite-nav-title"><span>The entire program</span></a></li></ul></li></ul></nav>


      <article class="devsite-article">
        <article class="devsite-article-inner">
  
          
  


<div class="devsite-rating-container
            "><div class="devsite-rating-stars"><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons" data-rating-val="1" data-category="Site-Wide Custom Events" data-label="Star Rating 1" track-metadata-score="1" track-type="feedback" track-name="rating" track-metadata-position="header" role="button" aria-label="网站内容评分：1 星（最高 5 星）"></div><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons" data-rating-val="2" data-category="Site-Wide Custom Events" data-label="Star Rating 2" track-metadata-score="2" track-type="feedback" track-name="rating" track-metadata-position="header" role="button" aria-label="网站内容评分：2 星（最高 5 星）"></div><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons" data-rating-val="3" data-category="Site-Wide Custom Events" data-label="Star Rating 3" track-metadata-score="3" track-type="feedback" track-name="rating" track-metadata-position="header" role="button" aria-label="网站内容评分：3 星（最高 5 星）"></div><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons" data-rating-val="4" data-category="Site-Wide Custom Events" data-label="Star Rating 4" track-metadata-score="4" track-type="feedback" track-name="rating" track-metadata-position="header" role="button" aria-label="网站内容评分：4 星（最高 5 星）"></div><div class="devsite-rating-star devsite-rating-star-outline gc-analytics-event material-icons" data-rating-val="5" data-category="Site-Wide Custom Events" data-label="Star Rating 5" track-metadata-score="5" track-type="feedback" track-name="rating" track-metadata-position="header" role="button" aria-label="网站内容评分：5 星（最高 5 星）"></div></div><div class="devsite-rating-description"></div><div class="devsite-rating-internal"><span class="devsite-rating-stats"></span></div></div><script>
  $(document).ready(function() {
    devsite.ratings.init(
      document.querySelectorAll('#devsite-feedback-project'), false
      
    );
  });
</script>


  
  <nav class="devsite-breadcrumb-nav devsite-nav">
    


<ul class="devsite-breadcrumb-list">
  
  <li class="devsite-breadcrumb-item">
    
    
    <a href="https://developers.google.cn/products/" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="1">
    
    
      产品
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="https://developers.google.cn/optimization/" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="2">
    
    
      OR-Tools
    
    
    </a>
    
  </li>
  
  <li class="devsite-breadcrumb-item">
    
    
    <div class="devsite-breadcrumb-guillemet material-icons"></div>
    
    
    <a href="https://developers.google.cn/optimization/introduction/overview" class="devsite-breadcrumb-link gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Breadcrumbs" data-value="3">
    
    
      Guides
    
    
    </a>
    
  </li>
  
</ul>

  </nav>
  
  
  <h1 itemprop="name" class="devsite-page-title">
    The N-queens Problem
  </h1>
  
  
  <nav class="devsite-page-nav-embedded devsite-nav"><ul class="devsite-page-nav-list"><li class="devsite-nav-item devsite-nav-item-heading"><a href="https://developers.google.cn/optimization/cp/queens#top_of_page" class="devsite-nav-title"><span>目录</span></a><button type="button" class="devsite-nav-show-all button-transparent material-icons" data-tooltip-align="b,c" data-tooltip="展开/收起内容" aria-label="展开/收起内容" data-title="展开/收起内容"></button></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#cp_solver" class="devsite-nav-title"><span>CP approach to the N-queens problem</span></a><ul class="devsite-page-nav-list"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#4queens" class="devsite-nav-title"><span>Propagation and backtracking</span></a></li></ul></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solving" class="devsite-nav-title"><span>Solution using CP-SAT</span></a><ul class="devsite-page-nav-list"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solver" class="devsite-nav-title"><span>Declare the model</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#variables" class="devsite-nav-title devsite-nav-item-hidden"><span>Create the variables</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#constraints" class="devsite-nav-title devsite-nav-item-hidden"><span>Create the constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solution_printer" class="devsite-nav-title devsite-nav-item-hidden"><span>Create a solution printer</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solution" class="devsite-nav-title devsite-nav-item-hidden"><span>Call the solver and display the results</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#diagram" class="devsite-nav-title devsite-nav-item-hidden"><span>An alternative solution printer</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#program" class="devsite-nav-title devsite-nav-item-hidden"><span>The entire program</span></a></li></ul></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solving_ori" class="devsite-nav-title devsite-nav-item-hidden"><span>Solution using the original CP solver</span></a><ul class="devsite-page-nav-list"><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solver_ori" class="devsite-nav-title devsite-nav-item-hidden"><span>Declare the solver</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#variables_ori" class="devsite-nav-title devsite-nav-item-hidden"><span>Create the variables</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#constraints_ori" class="devsite-nav-title devsite-nav-item-hidden"><span>Create the constraints</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#decision_builder" class="devsite-nav-title devsite-nav-item-hidden"><span>Add the decision builder</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#solution_ori" class="devsite-nav-title devsite-nav-item-hidden"><span>Call the solver and display the results</span></a></li><li class="devsite-nav-item"><a href="https://developers.google.cn/optimization/cp/queens#program" class="devsite-nav-title devsite-nav-item-hidden"><span>The entire program</span></a></li></ul></li><li class="devsite-nav-item"><button type="button" class="button-flat devsite-nav-more-items material-icons" aria-hidden="true" data-tooltip-align="b,c" data-tooltip="展开/收起内容" aria-label="展开/收起内容" data-title="展开/收起内容"></button></li></ul></nav>
  
  <div class="devsite-article-body clearfix
            " itemprop="articleBody">
    
    <p>In the following sections, we'll illustrate constraint programming (CP)
      by a combinatorial problem
      based on the game of chess. In chess, a queen can attack horizontally, vertically, and
    diagonally. The N-queens problem asks:</p>

    <blockquote>
    <i>How can N queens be placed on an NxN chessboard so that no two of
    them attack each other?</i>
    </blockquote>

    <p>Below, you can see one possible solution to the N-queens problem for N = 4.</p>

    <p><img src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/sol_4x4_b.png"></p>

    <p>No two queens are on the same row, column, or diagonal.</p>

    <p>Note that this isn't an optimization problem: we want to find all possible solutions, rather
       than one optimal solution, which makes it a natural candidate for constraint programming.
       The following sections describe the CP approach to the N-queens
       problem, and present Python programs that solve it using both the CP-SAT solver and the
       original CP solver.
    </p>

    <h2 id="cp_solver"><a href="https://developers.google.cn/optimization/cp/queens#top_of_page" class="devsite-back-to-top-link material-icons" data-tooltip-align="b,c" data-tooltip="返回页首" aria-label="返回页首" data-title="返回页首"></a>CP approach to the N-queens problem</h2>
    <p>A <a href="https://developers.google.cn/optimization/cp/cp_solver">CP solver</a> works by systematically trying all
      possible assignments of values to the variables in a problem, to
      find the feasible solutions. In the 4-queens problem, the solver starts at the leftmost
      column and successively places
      one queen in each column, at a location that is not attacked by any previously placed queens.
    </p>
    <h3 id="4queens">Propagation and backtracking</h3>
    <p>There are two key elements to a constraint programming search:
    </p><ul>
      <li><i>Propagation</i> —  Each time the solver assigns a value to a variable, the
        constraints add restrictions on the possible values of the unassigned variables. These
        restrictions <i>propagate</i> to future variable assignments.
        For example,
        in the 4-queens problem, each time the solver places a queen, it can't place any
        other queens on the row and diagonals the current queen is on.
        Propagation can speed up the search significantly by
        reducing the set of variable values the solver must explore.
      </li>
      <li><i>Backtracking</i> occurs when either the solver can't assign a value to the next
        variable,
        due to the constraints, or it finds a solution. In either case, the solver
        backtracks to a previous stage and changes the value of the variable at that stage to
        a value that hasn't already been tried. In the 4-queens example, this means moving a
        queen to a new square on the current column. </li>
    </ul>

    <p>Next, you'll see how constraint programming uses propagation
    and backtracking to solve the 4-queens problem.</p>

      <p>The solver starts by arbitrarily placing a queen in the upper left
    corner. That's a hypothesis of sorts; perhaps it will turn out that no
    solution exists with a queen in the upper left corner.</p>

    <p>Given this hypothesis, what constraints can we propagate? One
    constraint is that there can be only one queen in a column (the gray
    Xs below), and another constraint prohibits two queens on the
    same diagonal (the red Xs below).</p>

    <p><img src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/propagation1.png"></p>

    <p>Our third constraint prohibits queens on the same row:</p>

    <p><img src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/propagation2.png"></p><p>

    </p><p>Our constraints propagated, we can test out another hypothesis, and
    place a second queen on one of the available remaining squares. Our
    solver might decide to place in it the first available square in the
    second column:</p>

    <p><img src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/propagation3.png"></p>

    <p>After propagating the diagonal constraint, we can see that it
    leaves no available squares in either the third column or last
    row:</p>

    <p><img src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/propagation4.png"></p>

    <p>With no solutions possible at this stage, we need to backtrack. One
    option is for the solver to choose the other available square in the
    second column. However, constraint propagation then forces a queen
    into the second row of the third column, leaving no valid spots for
    the fourth queen:</p>

    <p><img src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/propagation6.png"></p>

    <p>And so the solver must backtrack again, this time all the way back
    to the placement of the first queen. We have now shown that no solution
    to the queens problem will occupy a corner square.</p>

    <p>Since there can be no queen in the corner, the solver moves the
    first queen down by one, and propagates, leaving only one spot for the
    second queen:</p>

    <p><img src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/propagation9.png"></p>

    <p>Propagating again reveals only one spot left for the third queen:</p>

    <p><img src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/propagation10.png"></p>

    <p>And for the fourth and final queen:</p>

    <p><img src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/propagation12.png"></p>

    <p>We have our first solution! If we instructed our solver to stop
    after finding the first solution, it would end here. Otherwise, it
    would backtrack again and place the first queen in the third row of
    the first column.</p>

    <h2 id="solving"><a href="https://developers.google.cn/optimization/cp/queens#top_of_page" class="devsite-back-to-top-link material-icons" data-tooltip-align="b,c" data-tooltip="返回页首" aria-label="返回页首" data-title="返回页首"></a>Solution using CP-SAT</h2>
    <p>The N-queens problem is ideally suited to constraint
    programming. In this section we'll walk through a short Python program
    that uses the CP-SAT solver to find all solutions to the problem.</p>

    <h3 id="solver">Declare the model</h3>

    <p>The following code declares the CP-SAT model.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="kwd">from</span><span class="pln"> ortools</span><span class="pun">.</span><span class="pln">sat</span><span class="pun">.</span><span class="pln">python </span><span class="kwd">import</span><span class="pln"> cp_model<br><br><br></span><span class="kwd">def</span><span class="pln"> main</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; model </span><span class="pun">=</span><span class="pln"> cp_model</span><span class="pun">.</span><span class="typ">CpModel</span><span class="pun">()</span></pre>

    <h3 id="variables">Create the variables</h3>
    <p>The solver's <code>NewIntVar</code> method creates the variables for the problem as
      an array named <code>queens</code>.
    </p><pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="pln">&nbsp; queens </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">model</span><span class="pun">.</span><span class="typ">NewIntVar</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> board_size </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'x%i'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">)]</span></pre>
    For any solution,
    <code>queens[i] = j</code> means there is a queen in column <code>i</code> and row
    <code>j</code>.<p></p>

    <h3 id="constraints">Create the constraints</h3>

    <p>Here's the code that creates the constraints for the problem.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="pln">&nbsp; </span><span class="com"># The following sets the constraint that all queens are in different rows.</span><span class="pln"><br>&nbsp; model</span><span class="pun">.</span><span class="typ">AddAllDifferent</span><span class="pun">(</span><span class="pln">queens</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; </span><span class="com"># Note: all queens must be in different columns because the indices of queens are all different.</span><span class="pln"><br><br>&nbsp; </span><span class="com"># The following sets the constraint that no two queens can be on the same diagonal.</span><span class="pln"><br>&nbsp; </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># Note: is not used in the inner loop.</span><span class="pln"><br>&nbsp; &nbsp; diag1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"><br>&nbsp; &nbsp; diag2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> j </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="com"># Create variable array for queens(j) + j.</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; q1 </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">.</span><span class="typ">NewIntVar</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> board_size</span><span class="pun">,</span><span class="pln"> </span><span class="str">'diag1_%i'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; diag1</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">q1</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; model</span><span class="pun">.</span><span class="typ">Add</span><span class="pun">(</span><span class="pln">q1 </span><span class="pun">==</span><span class="pln"> queens</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="com"># Create variable array for queens(j) - j.</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; q2 </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">.</span><span class="typ">NewIntVar</span><span class="pun">(-</span><span class="pln">board_size</span><span class="pun">,</span><span class="pln"> board_size</span><span class="pun">,</span><span class="pln"> </span><span class="str">'diag2_%i'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; diag2</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">q2</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; model</span><span class="pun">.</span><span class="typ">Add</span><span class="pun">(</span><span class="pln">q2 </span><span class="pun">==</span><span class="pln"> queens</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; model</span><span class="pun">.</span><span class="typ">AddAllDifferent</span><span class="pun">(</span><span class="pln">diag1</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; model</span><span class="pun">.</span><span class="typ">AddAllDifferent</span><span class="pun">(</span><span class="pln">diag2</span><span class="pun">)</span></pre>
    <p></p>
    <p>Let's see how these constraints guarantee the three conditions for the N-queens problem
      (queens on different rows, columns, and diagonals).</p>
    <h4>No two queens on the same row</h4>
    <p>Applying the solver's <code>AllDifferent</code> method to <code>queens</code>
      forces the values of <code>
      queens[i]</code> to be different for each
      <code>i</code>, which means that all queens must be in different rows.</p>

      <h4>No two queens on the same column</h4>
    <p>This constraint is implicit in the definition of <code>queens</code>.
      Since no two elements of <code>queens</code>
      can have the same index, no two queens can be in the same column.</p>

    <h4>No two queens on the same diagonal</h4>

    <p>The diagonal constraint is a little trickier than the row and column constraints.
      First, if two queens lie on the same diagonal, one of the following
      must be true:</p>
      <ul>
        <li>If the diagonal is descending (going from left to right), the row
         number plus column number for each of the two queens are equal. So
         <code>queens(i) + i</code> has the same value for two different indices <code>i</code>.
         </li>
        <li>If the diagonal is ascending, the row number minus the column
        number for each of the two queens are equal. In this case,
         <code>queens(i) - i</code> has the same value for two different indices <code>i</code>.</li>
      </ul>
    <p>So the diagonal constraint is that the values of <code>queens(i) + i</code> must all be different,
     and likewise the values of <code>queens(i) - i</code> must all be different, for different
     <code>i</code>.</p>
    <p>To apply the <code>AddAllDifferent</code> method to the <code>queens(i) + i</code>, we need to
    put the N instances of the variable, for <code>i</code> from 0 to N - 1, into a variable
    array. The following lines of code do this:</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="pln">q1 </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">.</span><span class="typ">NewIntVar</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> board_size</span><span class="pun">,</span><span class="pln"> </span><span class="str">'diag1_%i'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"><br>diag1</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">q1</span><span class="pun">)</span><span class="pln"><br>model</span><span class="pun">.</span><span class="typ">Add</span><span class="pun">(</span><span class="pln">q1 </span><span class="pun">==</span><span class="pln"> queens</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">)</span></pre>
    <p>Then we can apply
    <code>AddAllDifferent</code> to the array <code>diag1</code>, as shown above.</p>
    <p>The variable array for <code>queens(i) - i</code> is created similarly.</p>

    <h3 id="solution_printer">Create a solution printer</h3>
    <p>To print all solutions to the N-queens problem, you need to pass a callback, called a
    <em>solution printer</em>, to the CP-SAT solver. The callback prints each new solution as the
    solver finds it. The following code creates a solution printer.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="kwd">class</span><span class="pln"> </span><span class="typ">SolutionPrinter</span><span class="pun">(</span><span class="pln">cp_model</span><span class="pun">.</span><span class="typ">CpSolverSolutionCallback</span><span class="pun">):</span><span class="pln"><br>&nbsp; </span><span class="str">"""Print intermediate solutions."""</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> __init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> variables</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; cp_model</span><span class="pun">.</span><span class="typ">CpSolverSolutionCallback</span><span class="pun">.</span><span class="pln">__init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__variables </span><span class="pun">=</span><span class="pln"> variables<br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__solution_count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> </span><span class="typ">OnSolutionCallback</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__solution_count </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> v </span><span class="kwd">in</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__variables</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'%s = %i'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">v</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="typ">Value</span><span class="pun">(</span><span class="pln">v</span><span class="pun">)),</span><span class="pln"> </span><span class="kwd">end</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">' '</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">()</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> </span><span class="typ">SolutionCount</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__solution_count</span></pre>
    <p>Note that the solution printer must be written as a Python class, due to the Python
    interface to the underlying C++ solver.</p>
    <p>The solutions are printed by the following lines in the solution printer.
</p><pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="kwd">for</span><span class="pln"> v </span><span class="kwd">in</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__variables</span><span class="pun">:</span><span class="pln"><br>&nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'%s = %i'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">v</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="typ">Value</span><span class="pun">(</span><span class="pln">v</span><span class="pun">)),</span><span class="pln"> </span><span class="kwd">end</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">' '</span><span class="pun">)</span></pre>
    <p>In this example, <code>self.__variables</code> is the variable <code>queens</code>, and
      each <code>v</code> corresponds to one of the eight entries of <code>queens</code>. This
      prints a solution in the following form:</p>
<code>x0 = queens(0) x1 = queens(1) ... x7 = queens(7)</code>
      where <code>xi</code> is the column number of the queen in row <code>i</code>.<p></p>
    <p>The next section shows an example of a solution.</p>

    <h3 id="solution">Call the solver and display the results</h3>
    <p>The following code runs the solver and displays the solutions.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="pln">&nbsp; solver </span><span class="pun">=</span><span class="pln"> cp_model</span><span class="pun">.</span><span class="typ">CpSolver</span><span class="pun">()</span><span class="pln"><br>&nbsp; solution_printer </span><span class="pun">=</span><span class="pln"> </span><span class="typ">SolutionPrinter</span><span class="pun">(</span><span class="pln">queens</span><span class="pun">)</span><span class="pln"><br>&nbsp; status </span><span class="pun">=</span><span class="pln"> solver</span><span class="pun">.</span><span class="typ">SearchForAllSolutions</span><span class="pun">(</span><span class="pln">model</span><span class="pun">,</span><span class="pln"> solution_printer</span><span class="pun">)</span><span class="pln"><br>&nbsp; </span><span class="kwd">print</span><span class="pun">()</span><span class="pln"><br>&nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'Solutions found : %i'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> solution_printer</span><span class="pun">.</span><span class="typ">SolutionCount</span><span class="pun">())</span></pre>

    <p>The program finds 92 different solutions for an 8x8 board. Here's the first one.</p>
<pre><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div></div>x0 = 0 x1 = 6 x2 = 4 x3 = 7 x4 = 1 x5 = 3 x6 = 5 x7 = 2
 <i>...91 other solutions displayed...</i>

  Solutions found: 92</pre>
    <p>The <code>xi</code> correspond to row numbers. So, for example,
    <code>x0 = 3</code> means that the row number for the queen in the first column is 3.</p>

    <h3 id="diagram">An alternative solution printer</h3>
    <p>The following code creates an alternative solution printer, which prints the solutions as
    chessboard diagrams.
</p><pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="kwd">class</span><span class="pln"> </span><span class="typ">DiagramPrinter</span><span class="pun">(</span><span class="pln">cp_model</span><span class="pun">.</span><span class="typ">CpSolverSolutionCallback</span><span class="pun">):</span><span class="pln"><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> __init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> variables</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; cp_model</span><span class="pun">.</span><span class="typ">CpSolverSolutionCallback</span><span class="pun">.</span><span class="pln">__init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__variables </span><span class="pun">=</span><span class="pln"> variables<br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__solution_count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> </span><span class="typ">OnSolutionCallback</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__solution_count </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> v </span><span class="kwd">in</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__variables</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; queen_col </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">.</span><span class="typ">Value</span><span class="pun">(</span><span class="pln">v</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; board_size </span><span class="pun">=</span><span class="pln"> len</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__variables</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="com"># Print row with queen.</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> j </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> j </span><span class="pun">==</span><span class="pln"> queen_col</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># There is a queen in column j, row i.</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"Q"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">end</span><span class="pun">=</span><span class="str">" "</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">else</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"_"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">end</span><span class="pun">=</span><span class="str">" "</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">()</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> </span><span class="typ">SolutionCount</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__solution_count</span></pre>
    <p>You create this solution printer by the call</p>
<pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="pln">solution_printer </span><span class="pun">=</span><span class="pln"> </span><span class="typ">DiagramPrinter</span><span class="pun">(</span><span class="pln">queens</span><span class="pun">)</span></pre>
    <p>Now when you run the program, it displays the diagrams for all solutions. The diagram for
    the first solution is</p>
    <pre><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div></div>Q _ _ _ _ _ _ _
_ _ _ _ _ _ Q _
_ _ _ _ Q _ _ _
_ _ _ _ _ _ _ Q
_ Q _ _ _ _ _ _
_ _ _ Q _ _ _ _
_ _ _ _ _ Q _ _
_ _ Q _ _ _ _ _


  <i>...91 other solutions displayed...</i>

  Solutions found: 92</pre>

     <p>You can solve the problem for a board of a different size by passing in N as
     a command-line argument. For example, if the program is named <code>queens</code>,</p>
    <pre><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div></div><b>python queens.py 6</b></pre>
     <p>solves the problem for a 6x6 board.</p>

    <h3 id="program">The entire program</h3>
    <p>Here is the entire program for the N-queens program.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="kwd">from</span><span class="pln"> __future__ </span><span class="kwd">import</span><span class="pln"> print_function<br></span><span class="kwd">import</span><span class="pln"> sys<br></span><span class="kwd">from</span><span class="pln"> ortools</span><span class="pun">.</span><span class="pln">sat</span><span class="pun">.</span><span class="pln">python </span><span class="kwd">import</span><span class="pln"> cp_model<br><br><br></span><span class="kwd">def</span><span class="pln"> main</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; model </span><span class="pun">=</span><span class="pln"> cp_model</span><span class="pun">.</span><span class="typ">CpModel</span><span class="pun">()</span><span class="pln"><br>&nbsp; </span><span class="com"># Creates the variables.</span><span class="pln"><br>&nbsp; </span><span class="com"># The array index is the column, and the value is the row.</span><span class="pln"><br>&nbsp; queens </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">model</span><span class="pun">.</span><span class="typ">NewIntVar</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> board_size </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'x%i'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">)]</span><span class="pln"><br>&nbsp; </span><span class="com"># Creates the constraints.</span><span class="pln"><br>&nbsp; </span><span class="com"># The following sets the constraint that all queens are in different rows.</span><span class="pln"><br>&nbsp; model</span><span class="pun">.</span><span class="typ">AddAllDifferent</span><span class="pun">(</span><span class="pln">queens</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; </span><span class="com"># Note: all queens must be in different columns because the indices of queens are all different.</span><span class="pln"><br><br>&nbsp; </span><span class="com"># The following sets the constraint that no two queens can be on the same diagonal.</span><span class="pln"><br>&nbsp; </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># Note: is not used in the inner loop.</span><span class="pln"><br>&nbsp; &nbsp; diag1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"><br>&nbsp; &nbsp; diag2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> j </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="com"># Create variable array for queens(j) + j.</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; q1 </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">.</span><span class="typ">NewIntVar</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> board_size</span><span class="pun">,</span><span class="pln"> </span><span class="str">'diag1_%i'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; diag1</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">q1</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; model</span><span class="pun">.</span><span class="typ">Add</span><span class="pun">(</span><span class="pln">q1 </span><span class="pun">==</span><span class="pln"> queens</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="com"># Create variable array for queens(j) - j.</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; q2 </span><span class="pun">=</span><span class="pln"> model</span><span class="pun">.</span><span class="typ">NewIntVar</span><span class="pun">(-</span><span class="pln">board_size</span><span class="pun">,</span><span class="pln"> board_size</span><span class="pun">,</span><span class="pln"> </span><span class="str">'diag2_%i'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; diag2</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">q2</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; model</span><span class="pun">.</span><span class="typ">Add</span><span class="pun">(</span><span class="pln">q2 </span><span class="pun">==</span><span class="pln"> queens</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> j</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; model</span><span class="pun">.</span><span class="typ">AddAllDifferent</span><span class="pun">(</span><span class="pln">diag1</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; model</span><span class="pun">.</span><span class="typ">AddAllDifferent</span><span class="pun">(</span><span class="pln">diag2</span><span class="pun">)</span><span class="pln"><br>&nbsp; </span><span class="com">### Solve model.</span><span class="pln"><br>&nbsp; solver </span><span class="pun">=</span><span class="pln"> cp_model</span><span class="pun">.</span><span class="typ">CpSolver</span><span class="pun">()</span><span class="pln"><br>&nbsp; solution_printer </span><span class="pun">=</span><span class="pln"> </span><span class="typ">SolutionPrinter</span><span class="pun">(</span><span class="pln">queens</span><span class="pun">)</span><span class="pln"><br>&nbsp; status </span><span class="pun">=</span><span class="pln"> solver</span><span class="pun">.</span><span class="typ">SearchForAllSolutions</span><span class="pun">(</span><span class="pln">model</span><span class="pun">,</span><span class="pln"> solution_printer</span><span class="pun">)</span><span class="pln"><br>&nbsp; </span><span class="kwd">print</span><span class="pun">()</span><span class="pln"><br>&nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'Solutions found : %i'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> solution_printer</span><span class="pun">.</span><span class="typ">SolutionCount</span><span class="pun">())</span><span class="pln"><br><br><br></span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SolutionPrinter</span><span class="pun">(</span><span class="pln">cp_model</span><span class="pun">.</span><span class="typ">CpSolverSolutionCallback</span><span class="pun">):</span><span class="pln"><br>&nbsp; </span><span class="str">"""Print intermediate solutions."""</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> __init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> variables</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; cp_model</span><span class="pun">.</span><span class="typ">CpSolverSolutionCallback</span><span class="pun">.</span><span class="pln">__init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__variables </span><span class="pun">=</span><span class="pln"> variables<br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__solution_count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> </span><span class="typ">OnSolutionCallback</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__solution_count </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> v </span><span class="kwd">in</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__variables</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'%s = %i'</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">v</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="typ">Value</span><span class="pun">(</span><span class="pln">v</span><span class="pun">)),</span><span class="pln"> </span><span class="kwd">end</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">' '</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">()</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> </span><span class="typ">SolutionCount</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__solution_count<br><br><br></span><span class="kwd">class</span><span class="pln"> </span><span class="typ">DiagramPrinter</span><span class="pun">(</span><span class="pln">cp_model</span><span class="pun">.</span><span class="typ">CpSolverSolutionCallback</span><span class="pun">):</span><span class="pln"><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> __init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">,</span><span class="pln"> variables</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; cp_model</span><span class="pun">.</span><span class="typ">CpSolverSolutionCallback</span><span class="pun">.</span><span class="pln">__init__</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__variables </span><span class="pun">=</span><span class="pln"> variables<br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__solution_count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> </span><span class="typ">OnSolutionCallback</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__solution_count </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> v </span><span class="kwd">in</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__variables</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; queen_col </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">.</span><span class="typ">Value</span><span class="pun">(</span><span class="pln">v</span><span class="pun">))</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; board_size </span><span class="pun">=</span><span class="pln"> len</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__variables</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="com"># Print row with queen.</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> j </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> j </span><span class="pun">==</span><span class="pln"> queen_col</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># There is a queen in column j, row i.</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"Q"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">end</span><span class="pun">=</span><span class="str">" "</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">else</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"_"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">end</span><span class="pun">=</span><span class="str">" "</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">()</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">def</span><span class="pln"> </span><span class="typ">SolutionCount</span><span class="pun">(</span><span class="kwd">self</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">self</span><span class="pun">.</span><span class="pln">__solution_count<br><br><br></span><span class="kwd">if</span><span class="pln"> __name__ </span><span class="pun">==</span><span class="pln"> </span><span class="str">'__main__'</span><span class="pun">:</span><span class="pln"><br>&nbsp; </span><span class="com"># By default, solve the 8x8 problem.</span><span class="pln"><br>&nbsp; board_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">8</span><span class="pln"><br>&nbsp; </span><span class="kwd">if</span><span class="pln"> len</span><span class="pun">(</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">argv</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; board_size </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">argv</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln"><br>&nbsp; main</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">)</span></pre>

<h2 id="solving_ori"><a href="https://developers.google.cn/optimization/cp/queens#top_of_page" class="devsite-back-to-top-link material-icons" data-tooltip-align="b,c" data-tooltip="返回页首" aria-label="返回页首" data-title="返回页首"></a>Solution using the original CP solver</h2>
    <p>The following sections present a Python program that solves N-queens using the original
    CP solver. (However,
    we recommend using the newer <a href="https://developers.google.cn/optimization/cp/queens#solving">CP-SAT solver</a>.)

    </p><h3 id="solver_ori">Declare the solver</h3>

    <p>The following code declares the original CP solver.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="kwd">from</span><span class="pln"> ortools</span><span class="pun">.</span><span class="pln">constraint_solver </span><span class="kwd">import</span><span class="pln"> pywrapcp<br><br></span><span class="kwd">def</span><span class="pln"> main</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; </span><span class="com"># Creates the solver.</span><span class="pln"><br>&nbsp; solver </span><span class="pun">=</span><span class="pln"> pywrapcp</span><span class="pun">.</span><span class="typ">Solver</span><span class="pun">(</span><span class="str">"n-queens"</span><span class="pun">)</span></pre>

    <h3 id="variables_ori">Create the variables</h3>
    <p>The solver's <code>IntVar</code> method creates the variables for the problem as
      an array named <code>queens</code>.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="pln">&nbsp; </span><span class="com"># Creates the variables.</span><span class="pln"><br>&nbsp; </span><span class="com"># The array index is the column, and the value is the row.</span><span class="pln"><br>&nbsp; queens </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">solver</span><span class="pun">.</span><span class="typ">IntVar</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> board_size </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">"x%i"</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">)]</span></pre>
   <p>For any solution,
    <code>queens[j] = i</code> means there is a queen in column <code>j</code> and row
    <code>i</code>.</p>

    <h3 id="constraints_ori">Create the constraints</h3>

    <p>Here's the code that creates the constraints for the problem.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="pln">&nbsp; </span><span class="com"># Creates the constraints.</span><span class="pln"><br><br>&nbsp; </span><span class="com"># All rows must be different.</span><span class="pln"><br>&nbsp; solver</span><span class="pun">.</span><span class="typ">Add</span><span class="pun">(</span><span class="pln">solver</span><span class="pun">.</span><span class="typ">AllDifferent</span><span class="pun">(</span><span class="pln">queens</span><span class="pun">))</span><span class="pln"><br><br>&nbsp; </span><span class="com"># All columns must be different because the indices of queens are all different.</span><span class="pln"><br><br>&nbsp; </span><span class="com"># No two queens can be on the same diagonal.</span><span class="pln"><br>&nbsp; solver</span><span class="pun">.</span><span class="typ">Add</span><span class="pun">(</span><span class="pln">solver</span><span class="pun">.</span><span class="typ">AllDifferent</span><span class="pun">([</span><span class="pln">queens</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">)]))</span><span class="pln"><br>&nbsp; solver</span><span class="pun">.</span><span class="typ">Add</span><span class="pun">(</span><span class="pln">solver</span><span class="pun">.</span><span class="typ">AllDifferent</span><span class="pun">([</span><span class="pln">queens</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> i </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">)]))</span></pre>

    <p>These constraints guarantee the three conditions for the N-queens problem
      (queens on different rows, columns, and diagonals).</p>
    <h4>No two queens on the same row</h4>
    <p>Applying the solver's <code>AllDifferent</code> method to <code>queens</code>
      forces the values of <code>
      queens[i]</code> to be different for each
      <code>i</code>, which means that all queens must be in different rows.</p>

      <h4>No two queens on the same column</h4>
    <p>This constraint is implicit in the definition of <code>queens</code>.
      Since no two elements of <code>queens</code>
      can have the same index, no two queens can be in the same column.</p>
    <h4>No two queens on the same diagonal</h4>

    <p>The diagonal constraint is a little trickier than the row and column constraints.
      First, if two queens lie on the same diagonal, one of the following
      must be true:</p>
      <ul>
        <li>If the diagonal is descending (going from left to right), the row
         number plus column number for each of the two queens are equal. So
         <code>queens(i) + i</code> has the same value for two different indices <code>i</code>.
         </li>
        <li>If the diagonal is ascending, the row number minus the column
        number for each of the two queens are equal. In this case,
         <code>queens(i) - i</code> has the same value for two different indices <code>i</code>.</li>
      </ul>
    <p>So the diagonal constraint is that the values of <code>queens(i) + i</code> must all be different,
     and likewise the values of <code>queens(i) - i</code> must all be different, for different
     <code>i</code>.</p>

    <p>The code above adds this constraint by applying the
      <a href="https://developers.google.cn/optimization/reference/constraint_solver/constraint_solver/Solver/index.html">
        <code>AllDifferent</code></a> method
      to <code>queens[i]&nbsp;+&nbsp;i</code> and <code>queens[i]&nbsp;-&nbsp;i</code>,
      for each <code>i</code>.</p>

    <h3 id="decision_builder">Add the decision builder</h3>
    <p>The next step is to create a decision builder,
     which sets the search strategy for the problem. The search strategy can have a major impact on
     the search time, due to propagation of constraints, which
      reduces the number of variable values the solver has to explore. You have already seen an
      example of this in the <a href="https://developers.google.cn/optimization/cp/queens.html#4queens">4-queens example</a>.
     </p>

    <p>The following code creates a decision builder using the solver's
      <a href="https://developers.google.cn/optimization/reference/constraint_solver/constraint_solver/Solver/index.html#MakePhase">
      <code>Phase</code></a> method.
      </p><pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="pln">&nbsp; db </span><span class="pun">=</span><span class="pln"> solver</span><span class="pun">.</span><span class="typ">Phase</span><span class="pun">(</span><span class="pln">queens</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; solver</span><span class="pun">.</span><span class="pln">CHOOSE_FIRST_UNBOUND</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; solver</span><span class="pun">.</span><span class="pln">ASSIGN_MIN_VALUE</span><span class="pun">)</span></pre>

     See <a href="https://developers.google.cn/optimization/cp/cp_solver.html#db">Decision builder</a> for details on the
     input arguments to the <code>Phase</code> method.<p></p>

    <h4>How the decision builder works in the 4-queens example</h4>

    <p>Let's take a look at how decision builder directs the search in the
      <a href="https://developers.google.cn/optimization/cp/queens.html#4queens">4-queens example</a>.
      The solver begins with <code>queens[0]</code>,
      the first variable in the array,
      as directed by <code>CHOOSE_FIRST_UNBOUND</code>. The solver then assigns <code>queens[0]</code>
      the smallest value that hasn't already been tried, which is 0 at this stage,
      as directed by <code>ASSIGN_MIN_VALUE</code>. This places the first queen in the
      upper left corner of the board.</p>

    <p>Next, the solver selects <code>queens[1]</code>, which is now
      the first unbound variable in <code>queens</code>.
      After propagating the constraints, there are two possible
      rows for a queen in column 1:  row 2 or row 3. The <code>ASSIGN_MIN_VALUE</code> option
      directs the solver to assign
      <code>queens[1]&nbsp;=&nbsp;2</code>. (If instead, you set <code>IntValueStrategy</code> to
      <code>ASSIGN_MAX_VALUE</code>, the solver would assign <code>queens[1]&nbsp;=&nbsp;3</code>.)</p>

    <p>You can check that the rest of the search follows the same rules.</p>

    <h3 id="solution_ori">Call the solver and display the results</h3>
    <p>The following code runs the solver and displays the solution.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="pln">&nbsp; solver</span><span class="pun">.</span><span class="typ">NewSearch</span><span class="pun">(</span><span class="pln">db</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; </span><span class="com"># Iterates through the solutions, displaying each.</span><span class="pln"><br>&nbsp; num_solutions </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">while</span><span class="pln"> solver</span><span class="pun">.</span><span class="typ">NextSolution</span><span class="pun">():</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># Displays the solution just computed.</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> j </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> queens</span><span class="pun">[</span><span class="pln">j</span><span class="pun">].</span><span class="typ">Value</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> i</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># There is a queen in column j, row i.</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"Q"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">end</span><span class="pun">=</span><span class="str">" "</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">else</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"_"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">end</span><span class="pun">=</span><span class="str">" "</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; num_solutions </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"><br><br>&nbsp; solver</span><span class="pun">.</span><span class="typ">EndSearch</span><span class="pun">()</span></pre>

    <p>Here's the first solution found by the program for an 8x8 board.</p>

    <pre><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div></div>Q _ _ _ _ _ _ _
_ _ _ _ _ _ Q _
_ _ _ _ Q _ _ _
_ _ _ _ _ _ _ Q
_ Q _ _ _ _ _ _
_ _ _ Q _ _ _ _
_ _ _ _ _ Q _ _
_ _ Q _ _ _ _ _



  <i>...91 other solutions displayed...</i>

  Solutions found: 92</pre>

     <p>You can solve the problem for a board of a different size by passing in N as
     a command-line argument. For example,</p>
    <pre><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div></div><b>python projects/queens.py 6</b></pre>
     <p>solves the problem for a 6x6 board.</p>

    <p>The number of solutions goes up roughly exponentially with the size of the
    board:</p>

    <style>
      #table1 { width:75%; }
      #table1 td { width:25%; text-align: right; }
    </style>
    <p>
</p><div class="devsite-table-wrapper"><table id="table1">
  <tbody><tr><th>Board size</th><th>Solutions</th><th>Time to find all solutions (ms)</th></tr>
  <tr><td>1</td><td>1</td><td>0</td></tr>
  <tr><td>2</td><td>0</td><td>0</td></tr>
  <tr><td>3</td><td>0</td><td>0</td></tr>
  <tr><td>4</td><td>2</td><td>0</td></tr>
  <tr><td>5</td><td>10</td><td>0</td></tr>
  <tr><td>6</td><td>4</td><td>0</td></tr>
  <tr><td>7</td><td>40</td><td>3</td></tr>
  <tr><td>8</td><td>92</td><td>9</td></tr>
  <tr><td>9</td><td>352</td><td>35</td></tr>
  <tr><td>10</td><td>724</td><td>95</td></tr>
  <tr><td>11</td><td>2680</td><td>378</td></tr>
  <tr><td>12</td><td>14200</td><td>2198</td></tr>
  <tr><td>13</td><td>73712</td><td>11628</td></tr>
  <tr><td>14</td><td>365596</td><td>62427</td></tr>
  <tr><td>15</td><td>2279184</td><td>410701</td></tr>
</tbody></table></div>
    Many solutions are just rotations of others, and a technique called symmetry breaking can be
    used to reduce the amount of computation needed. We don't use that here; our solution above
    isn't intended to be fast, just simple. Of course, we could make it much faster if we wanted
    to only find one solution instead of all of them: no more than a few milliseconds for board sizes
    up to 50.<p></p>

    <h3 id="program">The entire program</h3>
    <p>The complete program is shown belos.</p>
    <pre class="prettyprint lang-python"><div class="devsite-code-button-wrapper"><div class="devsite-code-button gc-analytics-event material-icons devsite-dark-code-button" data-category="Site-Wide Custom Events" data-label="Dark Code Toggle" track-type="exampleCode" track-name="darkCodeToggle" data-tooltip-align="b,c" data-tooltip="深色代码主题" aria-label="深色代码主题" data-title="深色代码主题"></div><div class="devsite-code-button gc-analytics-event material-icons devsite-click-to-copy-button" data-category="Site-Wide Custom Events" data-label="Click To Copy" track-type="exampleCode" track-name="clickToCopy" data-tooltip-align="b,c" data-tooltip="点击复制" aria-label="点击复制" data-title="点击复制"></div></div><span class="str">"""<br>&nbsp; OR-tools solution to the N-queens problem.<br>"""</span><span class="pln"><br></span><span class="kwd">from</span><span class="pln"> __future__ </span><span class="kwd">import</span><span class="pln"> print_function<br></span><span class="kwd">import</span><span class="pln"> sys<br></span><span class="kwd">from</span><span class="pln"> ortools</span><span class="pun">.</span><span class="pln">constraint_solver </span><span class="kwd">import</span><span class="pln"> pywrapcp<br><br></span><span class="kwd">def</span><span class="pln"> main</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; </span><span class="com"># Creates the solver.</span><span class="pln"><br>&nbsp; solver </span><span class="pun">=</span><span class="pln"> pywrapcp</span><span class="pun">.</span><span class="typ">Solver</span><span class="pun">(</span><span class="str">"n-queens"</span><span class="pun">)</span><span class="pln"><br>&nbsp; </span><span class="com"># Creates the variables.</span><span class="pln"><br>&nbsp; </span><span class="com"># The array index is the column, and the value is the row.</span><span class="pln"><br>&nbsp; queens </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">solver</span><span class="pun">.</span><span class="typ">IntVar</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> board_size </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">"x%i"</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> i</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">)]</span><span class="pln"><br>&nbsp; </span><span class="com"># Creates the constraints.</span><span class="pln"><br><br>&nbsp; </span><span class="com"># All rows must be different.</span><span class="pln"><br>&nbsp; solver</span><span class="pun">.</span><span class="typ">Add</span><span class="pun">(</span><span class="pln">solver</span><span class="pun">.</span><span class="typ">AllDifferent</span><span class="pun">(</span><span class="pln">queens</span><span class="pun">))</span><span class="pln"><br><br>&nbsp; </span><span class="com"># All columns must be different because the indices of queens are all different.</span><span class="pln"><br><br>&nbsp; </span><span class="com"># No two queens can be on the same diagonal.</span><span class="pln"><br>&nbsp; solver</span><span class="pun">.</span><span class="typ">Add</span><span class="pun">(</span><span class="pln">solver</span><span class="pun">.</span><span class="typ">AllDifferent</span><span class="pun">([</span><span class="pln">queens</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">)]))</span><span class="pln"><br>&nbsp; solver</span><span class="pun">.</span><span class="typ">Add</span><span class="pun">(</span><span class="pln">solver</span><span class="pun">.</span><span class="typ">AllDifferent</span><span class="pun">([</span><span class="pln">queens</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> i </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">)]))</span><span class="pln"><br><br>&nbsp; db </span><span class="pun">=</span><span class="pln"> solver</span><span class="pun">.</span><span class="typ">Phase</span><span class="pun">(</span><span class="pln">queens</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; solver</span><span class="pun">.</span><span class="pln">CHOOSE_FIRST_UNBOUND</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; solver</span><span class="pun">.</span><span class="pln">ASSIGN_MIN_VALUE</span><span class="pun">)</span><span class="pln"><br>&nbsp; solver</span><span class="pun">.</span><span class="typ">NewSearch</span><span class="pun">(</span><span class="pln">db</span><span class="pun">)</span><span class="pln"><br><br>&nbsp; </span><span class="com"># Iterates through the solutions, displaying each.</span><span class="pln"><br>&nbsp; num_solutions </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">while</span><span class="pln"> solver</span><span class="pun">.</span><span class="typ">NextSolution</span><span class="pun">():</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com"># Displays the solution just computed.</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">for</span><span class="pln"> j </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">):</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> queens</span><span class="pun">[</span><span class="pln">j</span><span class="pun">].</span><span class="typ">Value</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> i</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># There is a queen in column j, row i.</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"Q"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">end</span><span class="pun">=</span><span class="str">" "</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">else</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"_"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">end</span><span class="pun">=</span><span class="str">" "</span><span class="pun">)</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">print</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; num_solutions </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"><br><br>&nbsp; solver</span><span class="pun">.</span><span class="typ">EndSearch</span><span class="pun">()</span><span class="pln"><br><br>&nbsp; </span><span class="kwd">print</span><span class="pun">()</span><span class="pln"><br>&nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"Solutions found:"</span><span class="pun">,</span><span class="pln"> num_solutions</span><span class="pun">)</span><span class="pln"><br>&nbsp; </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"Time:"</span><span class="pun">,</span><span class="pln"> solver</span><span class="pun">.</span><span class="typ">WallTime</span><span class="pun">(),</span><span class="pln"> </span><span class="str">"ms"</span><span class="pun">)</span><span class="pln"><br><br></span><span class="com"># By default, solve the 8x8 problem.</span><span class="pln"><br>board_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">8</span><span class="pln"><br><br></span><span class="kwd">if</span><span class="pln"> __name__ </span><span class="pun">==</span><span class="pln"> </span><span class="str">"__main__"</span><span class="pun">:</span><span class="pln"><br>&nbsp; </span><span class="kwd">if</span><span class="pln"> len</span><span class="pun">(</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">argv</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">:</span><span class="pln"><br>&nbsp; &nbsp; board_size </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="pln">sys</span><span class="pun">.</span><span class="pln">argv</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln"><br>&nbsp; main</span><span class="pun">(</span><span class="pln">board_size</span><span class="pun">)</span></pre>
  
  </div>
  

  
        
  







        
<div class="devsite-content-footer nocontent">
  
  
    <p>Except as otherwise noted, the content of this page is licensed under the <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see our <a href="https://developers.google.cn/terms/site-policies">Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p>
  

  
    
    <p class="devsite-content-footer-date" itemprop="datePublished" content="2018-11-16T15:40:26.178394">
      
      上次更新日期：十一月 16, 2018
    </p>
  

</div>

        </article>
      </article>
  

        </div>
      

<footer class="devsite-footer-promos nocontent"><nav class="devsite-full-site-width"><ul class="devsite-footer-promos-list"><li class="devsite-footer-promo"><a href="http://github.com/google/or-tools" class="devsite-footer-promo-title gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Content Page Footer Promo"><img class="devsite-footer-promo-icon" src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/logo-github.svg">
          
          
            GitHub
          
        </a><div class="devsite-footer-promo-description">Download our code</div></li><li class="devsite-footer-promo"><a href="https://groups.google.com/forum/#!forum/or-tools-discuss" class="devsite-footer-promo-title gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Content Page Footer Promo" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。"><img class="devsite-footer-promo-icon" src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/groups_24dp.png">
          
          
            Discussion forum
          
        </a><div class="devsite-footer-promo-description">Visit our forum</div></li><li class="devsite-footer-promo"><a href="http://or-tools.blogspot.com/" class="devsite-footer-promo-title gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Content Page Footer Promo" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。"><img class="devsite-footer-promo-icon" src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/blogger_24dp.png">
          
          
            Blog
          
        </a><div class="devsite-footer-promo-description">Read our blog</div></li></ul></nav></footer><footer class="devsite-footer-linkboxes nocontent
               devsite-footer-linkboxes-all-backup
               devsite-footer-linkboxes-with-sites"><nav class="devsite-full-site-width"><ul class="devsite-footer-linkboxes-list"><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">社交沟通</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="http://developers.googleblog.cn/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Blog Link">
                博客
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://www.facebook.com/Google-Developers-967415219957038/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Facebook Link">
                Facebook
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://plus.google.com/+GoogleDevelopers" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer G+ Link" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Google+
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://medium.com/google-developers" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Medium Link">
                Medium
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://twitter.com/googledevs" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Twitter Link">
                Twitter
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://www.youtube.com/channel/UCQqa5UIHtrnpiADC3eHFupw" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer YouTube Link" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                YouTube
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">计划</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://www.womentechmakers.com/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Women Techmakers">
                Women Techmakers
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.cn/agency/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Agency">
                Agency Program
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.cn/groups/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Groups">
                GDG
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.cn/experts/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Experts">
                Google Developers Experts
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.cn/startups/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Startups">
                Startup Launchpad
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://userresearch.google.com/?reserved=0&amp;utm_source=developers.google.com&amp;Q_Language=en&amp;utm_medium=own_srch&amp;utm_campaign=Global-developers&amp;utm_term=0&amp;utm_content=0&amp;productTag=clou&amp;campaignDate=nov18&amp;pType=devel&amp;referral_code=js564523" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer User Studies" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                User Studies
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-backup"><h3 class="devsite-footer-linkbox-heading">开发者控制台</h3><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://console.developers.google.com/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Console" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Google API Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://console.cloud.google.com/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Google Cloud Platform Console" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Google Cloud Platform Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://play.google.com/apps/publish/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Google Play Console" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Google Play Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://console.firebase.google.com/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Firebase Console" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Firebase Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://console.actions.google.com/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Actions on Google Console" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Actions on Google Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cast.google.com/publish/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Cast SDK Developer Console" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Cast SDK Developer Console
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://chrome.google.com/webstore/developer/dashboard" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Chrome Web Store Developer Dashboard" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Chrome Web Store Dashboard
            </a></li></ul></li><li class="devsite-footer-linkbox devsite-footer-linkbox-sites"><a href="https://developers.google.cn/" class="gc-analytics-event devsite-footer-linkbox-logo-link" data-category="Site-Wide Custom Events" data-label="Footer Google Developers Link"><img class="devsite-footer-linkbox-logo" src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/lockup-color-knockout.png" alt="Google Developers"></a><ul class="devsite-footer-linkbox-list"><li class="devsite-footer-linkbox-item"><a href="https://developer.android.google.cn/index.html" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Android Link">
                Android
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developer.chrome.com/home" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Chrome Link" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Chrome
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://firebase.google.cn/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Firebase Link">
                Firebase
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://cloud.google.com/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Cloud Link" data-tooltip-align="b,c" data-tooltip="您所在的区域可能无法访问此链接。" aria-label="您所在的区域可能无法访问此链接。">
                Google Cloud Platform
            </a></li><li class="devsite-footer-linkbox-item"><a href="https://developers.google.cn/products/" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Footer Products Link">
                所有产品
            </a></li></ul></li></ul></nav></footer><footer class="devsite-utility-footer"><nav class="devsite-utility-footer-nav devsite-nav devsite-full-site-width"><div class="devsite-utility-footer-nav-left"><form class="devsite-utility-footer-language" action="https://developers.google.cn/i18n/setlang/" method="post"><input type="hidden" name="xsrf_token" value="FxnZ5FNob7bbvz8IJN5dfTfZEf65QTDSFdVyxBncieA6MTU0NzAxNzQ4NzU5Njk1MQ"><input type="hidden" name="next" value="/optimization/cp/queens"><select class="devsite-utility-footer-language-select kd-select" name="language" track-type="languageSelector" track-name="click" style="display: none;"><option value="id" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="id" track-metadata-original-language="zh-cn" track-metadata-selected-language="id">
            Bahasa Indonesia
          </option><option value="de" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="de" track-metadata-original-language="zh-cn" track-metadata-selected-language="de">
            Deutsch
          </option><option value="en" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="en" track-metadata-original-language="zh-cn" track-metadata-selected-language="en">
            English
          </option><option value="es" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="es" track-metadata-original-language="zh-cn" track-metadata-selected-language="es">
            español
          </option><option value="fr" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="fr" track-metadata-original-language="zh-cn" track-metadata-selected-language="fr">
            français
          </option><option value="pt-br" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="pt-br" track-metadata-original-language="zh-cn" track-metadata-selected-language="pt-br">
            Português Brasileiro
          </option><option value="ru" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="ru" track-metadata-original-language="zh-cn" track-metadata-selected-language="ru">
            Русский
          </option><option value="ja" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="ja" track-metadata-original-language="zh-cn" track-metadata-selected-language="ja">
            日本語
          </option><option value="zh-cn" selected="selected" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="zh-cn" track-metadata-original-language="zh-cn" track-metadata-selected-language="zh-cn">
            简体中文
          </option><option value="ko" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="ko" track-metadata-original-language="zh-cn" track-metadata-selected-language="ko">
            한국어
          </option></select><span class="kd-button kd-menubutton kd-select" track-type="languageSelector" track-name="click"><div class="label">
            简体中文
          </div><div class="kd-disclosureindicator"></div></span></form><span class="devsite-utility-footer-links"><a class="devsite-utility-footer-link gc-analytics-event" href="https://developers.google.cn/terms/site-terms" data-category="Site-Wide Custom Events" data-label="Footer terms link" data-footer-link-id="terms">条款
         </a><a class="devsite-utility-footer-link gc-analytics-event" href="https://policies.google.cn/privacy" data-category="Site-Wide Custom Events" data-label="Footer privacy link" data-footer-link-id="privacy" data-cookie-policy="//policies.google.cn/technologies/cookies">隐私权
         </a></span></div></nav></footer><div class="devsite-feedback-dialog devsite-dialog"><div class="devsite-dialog-contents"><h3>发送以下问题的反馈：</h3><div class="devsite-feedback-item"><a data-type="documentation" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Docs Feedback Image" track-type="feedback" track-name="feedbackDocIcon" track-metadata-position="header"><div class="devsite-feedback-item-icon-container"><div class="devsite-feedback-item-icon-white devsite-feedback-item-icon-docs
                        material-icons"></div></div></a><div class="devsite-feedback-item-name">
          
          此网页
        </div><div class="devsite-feedback-item-description"><a data-type="documentation" tabindex="0" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Docs Feedback Text" track-type="feedback" track-name="feedbackDocText" track-metadata-position="header">
            
            文档反馈
          </a></div></div><div class="devsite-feedback-item"><a data-type="product" tabindex="0" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Product Feedback Image" track-type="feedback" track-name="feedbackProductIcon" track-metadata-position="header"><img src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/orLogo.png" class="devsite-feedback-item-icon" alt="OR-Tools"></a><div class="devsite-feedback-item-name">
        OR-Tools
        </div><div class="devsite-feedback-item-description"><a data-type="product" tabindex="0" class="gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Product Feedback Text" track-type="feedback" track-name="feedbackProductText" track-metadata-position="header">
            
            产品反馈
          </a></div></div></div><div class="devsite-dialog-buttons"><button type="button" class="devsite-feedback-cancel button-white gc-analytics-event" data-category="Site-Wide Custom Events" data-label="Cancel Feedback Button" track-type="feedback" track-name="cancelFeedbackButton" track-metadata-position="header">
        
        取消
      </button></div></div><script>
  $(document).ready(function() {
    new devsite.feedback.Widget({
        'product_id': '106275',
        'bucket': '',
        'context': 'DevSite feedback link',
        'version': 'devsite-20190107-r00-rc01.default'
      },
      document.querySelectorAll('.devsite-feedback-button'),
      'zh-cn',
      document.querySelector('.devsite-site-mask'),
      document.querySelector('.devsite-feedback-dialog'),
      document.querySelector('.devsite-feedback-cancel'),
      document.querySelectorAll('.devsite-feedback-item a:not([href])')
    );
  });
  </script></div><script async="" defer="" src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/api.js"></script><script src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/saved_resource"></script><script src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/script_foot_closure__zh_cn.js"></script><script src="./The N-queens Problem  _  OR-Tools  _  Google Developers_files/script_foot.js"></script><script>
        (function($) {
          
          devsite.devsite.Init($, {'ENABLE_BLOCKED_VIDEO_PLACEHOLDER': 1, 'SITE_NAME': 'devsite_china', 'FULL_SITE_SEARCH_ENABLED': 0, 'ENABLE_CLOUDTRACK': 0, 'VTAGS_ENABLED': 0, 'HISTORY_ENABLED': 0, 'SIDEBAR_MINI_ENABLED': 0, 'VERSION_HASH': '0ee1984e83', 'SCRIPTSAFE_DOMAIN': 'google-developers.gonglchuangl.net', 'ENABLE_BLOCKED_LINK_TOOLTIP': 1, 'ALLOWED_HOSTS': ['.android.com', '.appspot.com', '.gonglchuangl.net', '.google.cn', '.google.com', '.googleplex.com', '.tensorflow.org'], 'BLOCK_RSS_FEEDS': 1},
                               '[]','zh-cn',
                               true, '',
                               {"8e03e230de0bd8a6fe173fdf172e8b3f": true, "8de7a048f21618359bd37f5ce44be073": false, "cb025a64a50094835616312f4774a53d": true, "51470233c56fc1fde50f00b73c52b216": false, "d169d485cf24243a263783dbe42029b1": true, "039e5d84b87fd75807ffb37b7f1bbf2c": true, "700def1a83e356c06c0925afb05de4b0": false, "6749dcb526ce9bde6993550c7d928d24": true, "098dafe57affddc137df300142652cfd": false}, '/optimization/',
                               'https://developers.google.cn/');
        })(jQuery);

        
        devsite.localInit = function() {
          
        };

      </script><script>
      $('.devsite-utility-footer-language-select').each(function() {
        $(this).change(function(){$('.devsite-utility-footer-language').submit();});
      });
      </script></div><span id="devsite-request-elapsed" data-request-elapsed="185.759782791"></span>
<ul class="kd-menulist devsite-hidden" style="left: 151.386px; right: auto; top: 15628.3px;"><li class="kd-menulistitem" value="id" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="id" track-metadata-original-language="zh-cn" track-metadata-selected-language="id">
            Bahasa Indonesia
          </li><li class="kd-menulistitem" value="de" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="de" track-metadata-original-language="zh-cn" track-metadata-selected-language="de">
            Deutsch
          </li><li class="kd-menulistitem" value="en" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="en" track-metadata-original-language="zh-cn" track-metadata-selected-language="en">
            English
          </li><li class="kd-menulistitem" value="es" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="es" track-metadata-original-language="zh-cn" track-metadata-selected-language="es">
            español
          </li><li class="kd-menulistitem" value="fr" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="fr" track-metadata-original-language="zh-cn" track-metadata-selected-language="fr">
            français
          </li><li class="kd-menulistitem" value="pt-br" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="pt-br" track-metadata-original-language="zh-cn" track-metadata-selected-language="pt-br">
            Português Brasileiro
          </li><li class="kd-menulistitem" value="ru" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="ru" track-metadata-original-language="zh-cn" track-metadata-selected-language="ru">
            Русский
          </li><li class="kd-menulistitem" value="ja" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="ja" track-metadata-original-language="zh-cn" track-metadata-selected-language="ja">
            日本語
          </li><li class="kd-menulistitem devsite-selected-option" value="zh-cn" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="zh-cn" track-metadata-original-language="zh-cn" track-metadata-selected-language="zh-cn">
            简体中文
          </li><li class="kd-menulistitem" value="ko" track-type="languageSelector" track-name="changed" track-metadata-eventdetail="ko" track-metadata-original-language="zh-cn" track-metadata-selected-language="ko">
            한국어
          </li></ul></body></html>